<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Proton: BaseApp.cpp Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Proton
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_b4959094aa2649f063000bebf8111065.html">shared</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">BaseApp.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="BaseApp_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#include &quot;<a class="code" href="PlatformPrecomp_8h.html">PlatformPrecomp.h</a>&quot;</span>
<a name="l00002"></a>00002 <span class="preprocessor">#include &quot;<a class="code" href="BaseApp_8h.html">BaseApp.h</a>&quot;</span>
<a name="l00003"></a>00003 <span class="preprocessor">#include &quot;<a class="code" href="RTGLESExt_8h.html">Renderer/RTGLESExt.h</a>&quot;</span>
<a name="l00004"></a>00004 
<a name="l00005"></a>00005 <span class="preprocessor">#ifdef _IRR_STATIC_LIB_</span>
<a name="l00006"></a>00006 <span class="preprocessor"></span><span class="preprocessor">#include &quot;<a class="code" href="IrrlichtManager_8h.html">Irrlicht/IrrlichtManager.h</a>&quot;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#endif</span>
<a name="l00008"></a>00008 <span class="preprocessor"></span>
<a name="l00009"></a><a class="code" href="BaseApp_8h.html#abacd00f59b1d7c451018b6e6907a22a5">00009</a> <a class="code" href="classEntity.html">Entity</a> * <a class="code" href="BaseApp_8cpp.html#abacd00f59b1d7c451018b6e6907a22a5">GetEntityRoot</a>() 
<a name="l00010"></a>00010 {
<a name="l00011"></a>00011         assert(<a class="code" href="BaseApp_8cpp.html#aef043c38b21bf52ff43fbca27a6cadb0">IsBaseAppInitted</a>() &amp;&amp; <span class="stringliteral">&quot;Base app should be initted before calling this&quot;</span>);
<a name="l00012"></a>00012         <span class="keywordflow">return</span> <a class="code" href="BaseApp_8h.html#a72086b48d24daf0a65dd20189a16bd16">GetBaseApp</a>()-&gt;<a class="code" href="classBaseApp.html#ad34e94ae386eb28c9e71dfb2a215f7c8">GetEntityRoot</a>();
<a name="l00013"></a>00013 }
<a name="l00014"></a>00014 
<a name="l00015"></a><a class="code" href="BaseApp_8h.html#a2575c1138f3c57506bd1b72caa8c80c2">00015</a> <a class="code" href="classRenderBatcher.html">RenderBatcher</a> <a class="code" href="BaseApp_8cpp.html#a2575c1138f3c57506bd1b72caa8c80c2">g_globalBatcher</a>;
<a name="l00016"></a><a class="code" href="BaseApp_8cpp.html#a72158d37cb577bff697b10b4a271e891">00016</a> <span class="keywordtype">bool</span> <a class="code" href="BaseApp_8cpp.html#a72158d37cb577bff697b10b4a271e891">g_isLoggerInitted</a> = <span class="keyword">false</span>;
<a name="l00017"></a><a class="code" href="BaseApp_8cpp.html#ad55e84e47063a4ac82ea0d602715405d">00017</a> <span class="keywordtype">bool</span> <a class="code" href="BaseApp_8cpp.html#ad55e84e47063a4ac82ea0d602715405d">g_isBaseAppInitted</a> = <span class="keyword">false</span>;
<a name="l00018"></a>00018 
<a name="l00019"></a><a class="code" href="BaseApp_8h.html#aef043c38b21bf52ff43fbca27a6cadb0">00019</a> <span class="keywordtype">bool</span> <a class="code" href="BaseApp_8cpp.html#aef043c38b21bf52ff43fbca27a6cadb0">IsBaseAppInitted</a>()
<a name="l00020"></a>00020 {
<a name="l00021"></a>00021         <span class="keywordflow">return</span> <a class="code" href="BaseApp_8cpp.html#ad55e84e47063a4ac82ea0d602715405d">g_isBaseAppInitted</a>;
<a name="l00022"></a>00022 }
<a name="l00023"></a>00023 
<a name="l00024"></a><a class="code" href="classBaseApp.html#ae8f97fc28ca93c7c08a616cee9a6eb58">00024</a> <a class="code" href="classBaseApp.html#ae8f97fc28ca93c7c08a616cee9a6eb58">BaseApp::BaseApp</a>()
<a name="l00025"></a>00025 {
<a name="l00026"></a>00026                 <a class="code" href="classBaseApp.html#a1e1fdd6dfbbcab89df44f2e054fc526e">m_bDisableSubPixelBlits</a> = <span class="keyword">false</span>;
<a name="l00027"></a>00027                 <a class="code" href="classBaseApp.html#ab4fe4fbf55a4dd78a7265128d0c3f083">m_bCheatMode</a> = <span class="keyword">false</span>;
<a name="l00028"></a>00028                 <a class="code" href="classBaseApp.html#a2acd3e6dd17cd9eca58f716eb1f43ef0">m_memUsed</a> = <a class="code" href="classBaseApp.html#ab97815794eea1ba95fe62dc2923b178d">m_texMemUsed</a> = 0;   
<a name="l00029"></a>00029                 <a class="code" href="BaseApp_8cpp.html#a72158d37cb577bff697b10b4a271e891">g_isLoggerInitted</a> = <span class="keyword">true</span>;       
<a name="l00030"></a>00030                 <a class="code" href="classBaseApp.html#a60fbc4444e40842ee655518c296d0bae">m_bInitted</a> = <span class="keyword">false</span>;
<a name="l00031"></a>00031                 <a class="code" href="classBaseApp.html#a7235e28b6ba8e75531af50a268bd39e6">m_bConsoleVisible</a> = <span class="keyword">false</span>;
<a name="l00032"></a>00032                 <a class="code" href="classBaseApp.html#a798518d8f8a50cc10a5fe075bb675bad">m_bManualRotation</a> = <span class="keyword">false</span>;
<a name="l00033"></a>00033                 <a class="code" href="classBaseApp.html#a8f430640e35f9646df1c3cc567c05370">SetFPSVisible</a>(<span class="keyword">false</span>);
<a name="l00034"></a>00034                 <a class="code" href="classBaseApp.html#a0f8d74511bf156f5381f504534ae5867">m_bIsInBackground</a> = <span class="keyword">false</span>;
<a name="l00035"></a>00035                 <a class="code" href="classBaseApp.html#ad318f4b7e8f3476d055c05889a447c0a">SetInputMode</a>(<a class="code" href="BaseApp_8h.html#a058e68b668aa1f4fd58f2e6bfb985481abdd7a740be45d3aa42b2425b6ee34601">INPUT_MODE_NORMAL</a>);
<a name="l00036"></a>00036                 <a class="code" href="classBaseApp.html#a74ce175e82e8ddf0e7e3e5c95e046ae7">m_version</a> = <span class="stringliteral">&quot;No default Version&quot;</span>; <span class="comment">// this is over written by network messages that come from IOS and Android. For other platforms (like windows), it will remain this.</span>
<a name="l00037"></a>00037                 
<a name="l00038"></a>00038                 <a class="code" href="classBaseApp.html#aa7398481bc9b0bdf9e54f246f502c773">m_touchTracker</a>.resize(C_MAX_TOUCHES_AT_ONCE);
<a name="l00039"></a>00039                 <a class="code" href="classBaseApp.html#a6b1e4450bd327fbde41e211295bbb748">ClearError</a>();
<a name="l00040"></a>00040                 <a class="code" href="BaseApp_8cpp.html#ad55e84e47063a4ac82ea0d602715405d">g_isBaseAppInitted</a> = <span class="keyword">true</span>;
<a name="l00041"></a>00041 }
<a name="l00042"></a>00042 
<a name="l00043"></a><a class="code" href="classBaseApp.html#acd5dea4cb74bc7bbdc200426873723f5">00043</a> <a class="code" href="classBaseApp.html#acd5dea4cb74bc7bbdc200426873723f5">BaseApp::~BaseApp</a>()
<a name="l00044"></a>00044 {
<a name="l00045"></a>00045         <a class="code" href="classBaseApp.html#a3adaa9cfbcfeb76886978ff92bc3b7ca">m_entityRoot</a>.<a class="code" href="classEntity.html#a7a6fe2424ed3bee46a4f8d9396e8ff65">RemoveAllEntities</a>();
<a name="l00046"></a>00046         <a class="code" href="classBaseApp.html#abc1daa91f63b92b4006cc8c369dfb0c5">m_resourceManager</a>.<a class="code" href="classResourceManager.html#a4e60b91cd091517104231ec74a6c4844" title="Removes and destroys all the resources currently in this resource manager.">KillAllResources</a>();
<a name="l00047"></a>00047         <a class="code" href="classBaseApp.html#a66550af38a890bb93d4edbba3bf96d36">m_commandLineParms</a>.clear();
<a name="l00048"></a>00048         <a class="code" href="BaseApp_8cpp.html#a72158d37cb577bff697b10b4a271e891">g_isLoggerInitted</a> = <span class="keyword">false</span>;
<a name="l00049"></a>00049 }
<a name="l00050"></a>00050 
<a name="l00051"></a><a class="code" href="classBaseApp.html#ae54f1d4fefdc2998cfc2cb3d8cd40c36">00051</a> <span class="keywordtype">void</span> <a class="code" href="classBaseApp.html#ae54f1d4fefdc2998cfc2cb3d8cd40c36">BaseApp::Kill</a>()
<a name="l00052"></a>00052 {
<a name="l00053"></a>00053         <a class="code" href="BaseApp_8cpp.html#ad55e84e47063a4ac82ea0d602715405d">g_isBaseAppInitted</a> = <span class="keyword">false</span>;
<a name="l00054"></a>00054         <span class="keyword">delete</span> <span class="keyword">this</span>;
<a name="l00055"></a>00055 }
<a name="l00056"></a>00056 
<a name="l00057"></a><a class="code" href="MessageManager_8h.html#a05509d50accee8a8c168438ee2dba36b">00057</a> <a class="code" href="MessageManager_8h.html#a6ccdae1e5bdcea24cc3c7a814445e196">eTimingSystem</a> <a class="code" href="BaseApp_8cpp.html#a05509d50accee8a8c168438ee2dba36b">GetTiming</a>()
<a name="l00058"></a>00058 {
<a name="l00059"></a>00059         <span class="keywordflow">return</span> <a class="code" href="BaseApp_8h.html#a72086b48d24daf0a65dd20189a16bd16">GetBaseApp</a>()-&gt;<a class="code" href="classBaseApp.html#a613a344d0efb3819f467b39f39b0ab3a">GetActiveTimingSystem</a>();
<a name="l00060"></a>00060 }
<a name="l00061"></a>00061 
<a name="l00062"></a><a class="code" href="classBaseApp.html#a907c7ca22a08dcfcd256adbbce235a2a">00062</a> <span class="keywordtype">void</span> <a class="code" href="classBaseApp.html#a907c7ca22a08dcfcd256adbbce235a2a">BaseApp::PrintGLString</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="Renderer_2GL_2glext_8h.html#aaced7cfc21e7d37775d6921bb8177239">name</a>, <a class="code" href="flash_2GLES_2gl_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> <a class="code" href="flash_2GLES_2glext_8h.html#ad585a1393cfa368fa9dc3d8ebff640d5">s</a>)
<a name="l00063"></a>00063 {
<a name="l00064"></a>00064         <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="Renderer_2GL_2glext_8h.html#a4568fc090febc136eed4577a600739ca">v</a> = (<span class="keyword">const</span> <span class="keywordtype">char</span> *) <a class="code" href="GLFlashAdaptor_8cpp.html#ae7fb40bb9623419369f020127e3bf65a">glGetString</a>(s);
<a name="l00065"></a>00065         <a class="code" href="AndroidUtils_8cpp.html#aaa5c9bf2289dec09f59ef2b7ba6c66ae">LogMsg</a>(<span class="stringliteral">&quot;GL %s = %s\n&quot;</span>, name, v);
<a name="l00066"></a>00066 }
<a name="l00067"></a>00067 
<a name="l00068"></a><a class="code" href="classBaseApp.html#acbdde2bb959d5abd2db84a71ef4cfcee">00068</a> <span class="keywordtype">void</span> <a class="code" href="classBaseApp.html#acbdde2bb959d5abd2db84a71ef4cfcee">BaseApp::InitializeGLDefaults</a>()
<a name="l00069"></a>00069 {
<a name="l00070"></a>00070         <a class="code" href="GLFlashAdaptor_8cpp.html#a28695f13b359fbbc9e8a5d57662305eb">glMatrixMode</a>(GL_MODELVIEW);
<a name="l00071"></a>00071         <a class="code" href="GLFlashAdaptor_8cpp.html#a984e052016da160e455a1e9adfe10933">glDepthMask</a>(GL_TRUE);
<a name="l00072"></a>00072         <a class="code" href="GLFlashAdaptor_8cpp.html#a408bccf3c3cf0419446bf36c64a3adc0">glEnable</a>(GL_TEXTURE_2D);
<a name="l00073"></a>00073         <a class="code" href="GLFlashAdaptor_8cpp.html#a408bccf3c3cf0419446bf36c64a3adc0">glEnable</a>(GL_CULL_FACE);
<a name="l00074"></a>00074         <a class="code" href="GLFlashAdaptor_8cpp.html#ab63e080caaefe4d36c40d4ebaf9a3f59">glCullFace</a>(GL_BACK);
<a name="l00075"></a>00075         <a class="code" href="GLFlashAdaptor_8cpp.html#a408bccf3c3cf0419446bf36c64a3adc0">glEnable</a>(GL_DEPTH_TEST);
<a name="l00076"></a>00076         <a class="code" href="GLFlashAdaptor_8cpp.html#a80fb7c3b62fc0b18c40424cf3bc22d13">glDisable</a>(GL_ALPHA_TEST);
<a name="l00077"></a>00077         <a class="code" href="GLFlashAdaptor_8cpp.html#a80fb7c3b62fc0b18c40424cf3bc22d13">glDisable</a>( GL_BLEND );
<a name="l00078"></a>00078         <a class="code" href="GLFlashAdaptor_8cpp.html#ad4d5af9621c6fd6339889bdb295e11c8">glEnableClientState</a>(GL_TEXTURE_COORD_ARRAY);    
<a name="l00079"></a>00079         <a class="code" href="GLFlashAdaptor_8cpp.html#ad4d5af9621c6fd6339889bdb295e11c8">glEnableClientState</a>(GL_VERTEX_ARRAY);   
<a name="l00080"></a>00080         <a class="code" href="GLFlashAdaptor_8cpp.html#a90fb252b1dfce3a2c9a96d605693450b">glDisableClientState</a>(GL_COLOR_ARRAY);   
<a name="l00081"></a>00081         <a class="code" href="GLFlashAdaptor_8cpp.html#a90fb252b1dfce3a2c9a96d605693450b">glDisableClientState</a>(GL_NORMAL_ARRAY);
<a name="l00082"></a>00082         <a class="code" href="GLFlashAdaptor_8cpp.html#a80fb7c3b62fc0b18c40424cf3bc22d13">glDisable</a>( GL_LIGHTING );
<a name="l00083"></a>00083         <a class="code" href="GLFlashAdaptor_8cpp.html#a79c858542ddbac9c53d01383da363bb9">glDepthFunc</a>(GL_LEQUAL);
<a name="l00084"></a>00084         <a class="code" href="GLFlashAdaptor_8cpp.html#a07ff942101a3b2cfc63975f062d4ee7a">glBlendFunc</a>( GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA );
<a name="l00085"></a>00085         <a class="code" href="GLFlashAdaptor_8cpp.html#aeed45e81d121fa686b8286a2855d655c">glColor4x</a>(1 &lt;&lt; 16, 1 &lt;&lt; 16, 1 &lt;&lt; 16, 1 &lt;&lt; 16);
<a name="l00086"></a>00086         <a class="code" href="GLFlashAdaptor_8cpp.html#a27f7773385f098cbfa7280d5f3fb4e51">glClearColor</a>(0,0,0,255);
<a name="l00087"></a>00087 }
<a name="l00088"></a>00088 
<a name="l00089"></a><a class="code" href="classBaseApp.html#a85179586902aba7964a77994e65f5def">00089</a> <span class="keywordtype">bool</span> <a class="code" href="classBaseApp.html#a85179586902aba7964a77994e65f5def">BaseApp::Init</a>()
<a name="l00090"></a>00090 {
<a name="l00091"></a>00091         
<a name="l00092"></a>00092         <a class="code" href="classBaseApp.html#aeacba6f700263177e258017656c8220d">m_gameTimer</a>.<a class="code" href="classGameTimer.html#af67b252c869cc649971b8cceefcb1eb8">Reset</a>();
<a name="l00093"></a>00093         <a class="code" href="classBaseApp.html#ad34e94ae386eb28c9e71dfb2a215f7c8">GetEntityRoot</a>()-&gt;<a class="code" href="classEntity.html#a86aecc157fc5f3032926900f68d1dfbb">SetName</a>(<span class="stringliteral">&quot;root&quot;</span>);
<a name="l00094"></a>00094 
<a name="l00095"></a>00095         <span class="keywordflow">if</span> (<a class="code" href="classBaseApp.html#a60fbc4444e40842ee655518c296d0bae">m_bInitted</a>) 
<a name="l00096"></a>00096         {
<a name="l00097"></a>00097                 <a class="code" href="AndroidUtils_8cpp.html#aaa5c9bf2289dec09f59ef2b7ba6c66ae">LogMsg</a>(<span class="stringliteral">&quot;Why are we initting more than once?&quot;</span>);
<a name="l00098"></a>00098                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00099"></a>00099         }
<a name="l00100"></a>00100 
<a name="l00101"></a>00101         <a class="code" href="classBaseApp.html#a60fbc4444e40842ee655518c296d0bae">m_bInitted</a> = <span class="keyword">true</span>;
<a name="l00102"></a>00102 
<a name="l00103"></a>00103         CHECK_GL_ERROR();
<a name="l00104"></a>00104 
<a name="l00105"></a>00105         <a class="code" href="classBaseApp.html#a907c7ca22a08dcfcd256adbbce235a2a">PrintGLString</a>(<span class="stringliteral">&quot;Version&quot;</span>, GL_VERSION);
<a name="l00106"></a>00106         <a class="code" href="classBaseApp.html#a907c7ca22a08dcfcd256adbbce235a2a">PrintGLString</a>(<span class="stringliteral">&quot;Vendor&quot;</span>, GL_VENDOR);
<a name="l00107"></a>00107         <a class="code" href="classBaseApp.html#a907c7ca22a08dcfcd256adbbce235a2a">PrintGLString</a>(<span class="stringliteral">&quot;Renderer&quot;</span>, GL_RENDERER);
<a name="l00108"></a>00108         <a class="code" href="classBaseApp.html#a907c7ca22a08dcfcd256adbbce235a2a">PrintGLString</a>(<span class="stringliteral">&quot;Extensions&quot;</span>, GL_EXTENSIONS);
<a name="l00109"></a>00109 
<a name="l00110"></a>00110         <a class="code" href="classBaseApp.html#acbdde2bb959d5abd2db84a71ef4cfcee">InitializeGLDefaults</a>();
<a name="l00111"></a>00111         
<a name="l00112"></a>00112         <a class="code" href="flash_2GLES_2gl_8h.html#acebcc1c5663f14ebde1d16831e5fed94">GLint</a> depthbits;
<a name="l00113"></a>00113         <a class="code" href="GLFlashAdaptor_8cpp.html#a087594bd5bedd7801b9bb8ecd483630c">glGetIntegerv</a>(GL_DEPTH_BITS, &amp;depthbits);
<a name="l00114"></a>00114         <a class="code" href="AndroidUtils_8cpp.html#aaa5c9bf2289dec09f59ef2b7ba6c66ae">LogMsg</a>(<span class="stringliteral">&quot;GL depth buffer: %d bit&quot;</span>, depthbits);
<a name="l00115"></a>00115 
<a name="l00116"></a>00116         CHECK_GL_ERROR();
<a name="l00117"></a>00117 
<a name="l00118"></a>00118         <span class="keywordflow">if</span> (<a class="code" href="BaseApp_8h.html#ae540dadab1f412451b29de16f58ab139">GetAudioManager</a>())
<a name="l00119"></a>00119         {
<a name="l00120"></a>00120                 <a class="code" href="BaseApp_8h.html#ae540dadab1f412451b29de16f58ab139">GetAudioManager</a>()-&gt;<a class="code" href="classAudioManager.html#a8b3436782f316a1cd5110d77c02f855e">Init</a>();
<a name="l00121"></a>00121         }
<a name="l00122"></a>00122 
<a name="l00123"></a>00123         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00124"></a>00124 }
<a name="l00125"></a>00125 
<a name="l00126"></a><a class="code" href="BaseApp_8cpp.html#a45a6d04d136e0c40ce00eed0610ff4e7">00126</a> <span class="keywordtype">void</span> <a class="code" href="BaseApp_8cpp.html#a45a6d04d136e0c40ce00eed0610ff4e7">DrawConsole</a>()
<a name="l00127"></a>00127 {
<a name="l00128"></a>00128         <span class="comment">//not implemented</span>
<a name="l00129"></a>00129 }
<a name="l00130"></a>00130 
<a name="l00131"></a><a class="code" href="classBaseApp.html#a373ff81f7946181429f4e8fea43cd1ce">00131</a> <span class="keywordtype">void</span> <a class="code" href="classBaseApp.html#a373ff81f7946181429f4e8fea43cd1ce">BaseApp::Draw</a>()
<a name="l00132"></a>00132 {
<a name="l00133"></a>00133 <span class="preprocessor">#ifdef _DEBUG</span>
<a name="l00134"></a>00134 <span class="preprocessor"></span><span class="comment">//LogMsg(&quot;**********FRAME START&quot;);</span>
<a name="l00135"></a>00135 <span class="preprocessor">#endif</span>
<a name="l00136"></a>00136 <span class="preprocessor"></span>    <a class="code" href="classVariantList.html">VariantList</a> vList(<a class="code" href="classVariant.html">Variant</a>(0,0));
<a name="l00137"></a>00137     
<a name="l00138"></a>00138         <a class="code" href="classBaseApp.html#adf9f9548cba5946ebf2ff588a167fe3e" title="Signal for doing rendering.">m_sig_render</a>(&amp;vList);
<a name="l00139"></a>00139 
<a name="l00140"></a>00140         <span class="keywordflow">if</span> (<a class="code" href="classBaseApp.html#a2bbba7dceae3c35be249e1920fedbb14">GetFPSVisible</a>())
<a name="l00141"></a>00141         {
<a name="l00142"></a>00142                 <span class="keywordtype">char</span> stTemp[256];
<a name="l00143"></a>00143                 sprintf(stTemp, <span class="stringliteral">&quot;fps: %d - M: %.2f, T: %.2f A: %.2f F: %.2f&quot;</span>, <a class="code" href="classBaseApp.html#aeacba6f700263177e258017656c8220d">m_gameTimer</a>.<a class="code" href="classGameTimer.html#a06b4a0707e605c3b046466a05d1231b6">GetFPS</a>(), (float(<a class="code" href="classBaseApp.html#a2acd3e6dd17cd9eca58f716eb1f43ef0">m_memUsed</a>)/1024)/1024, (<span class="keywordtype">float</span>(<a class="code" href="classBaseApp.html#ab97815794eea1ba95fe62dc2923b178d">m_texMemUsed</a>)/1024)/1024,  <span class="keywordtype">float</span>(<a class="code" href="BaseApp_8h.html#ae540dadab1f412451b29de16f58ab139">GetAudioManager</a>()-&gt;<a class="code" href="classAudioManager.html#a19b08fc73136133f77beda399b3caaef">GetMemoryUsed</a>()/1024)/ 1024, <span class="keywordtype">float</span>(<a class="code" href="AndroidUtils_8cpp.html#a82f64c25cccdb1d9cac86095e58f1136">GetFreeMemory</a>()/1024)/ 1024);
<a name="l00144"></a>00144         
<a name="l00145"></a>00145 <span class="preprocessor">#ifdef _IRR_STATIC_LIB_</span>
<a name="l00146"></a>00146 <span class="preprocessor"></span>                <span class="keywordtype">int</span> prims = 0;
<a name="l00147"></a>00147                 <span class="keywordflow">if</span> (<a class="code" href="IrrlichtManager_8cpp.html#ad2dbf24db81a3b689a19cb7008ec3b8d">GetIrrlichtManager</a>()-&gt;GetDriver())
<a name="l00148"></a>00148                 {
<a name="l00149"></a>00149                         prims = <a class="code" href="IrrlichtManager_8cpp.html#ad2dbf24db81a3b689a19cb7008ec3b8d">GetIrrlichtManager</a>()-&gt;<a class="code" href="classIrrlichtManager.html#a3c6471bfbf45283b7b20969c324b1aa9">GetDriver</a>()-&gt;getPrimitiveCountDrawn();
<a name="l00150"></a>00150                 }
<a name="l00151"></a>00151                 <span class="keywordtype">char</span> stExtra[256];
<a name="l00152"></a>00152                 sprintf(stExtra, <span class="stringliteral">&quot; Prims: %d&quot;</span>, prims);
<a name="l00153"></a>00153                 strcat(stTemp, stExtra);
<a name="l00154"></a>00154 <span class="preprocessor">#endif          </span>
<a name="l00155"></a>00155 <span class="preprocessor"></span>        
<a name="l00156"></a>00156 <span class="preprocessor">#ifdef PLATFORM_FLASH</span>
<a name="l00157"></a>00157 <span class="preprocessor"></span>                <span class="keywordtype">char</span> stExtra[256];
<a name="l00158"></a>00158                 sprintf(stExtra, <span class="stringliteral">&quot; Flash: %.2f&quot;</span>, <span class="keywordtype">float</span>(<a class="code" href="FlashUtils_8cpp.html#a715f733e441d22eb9f79d0d3a21caef8">GetNativeMemoryUsed</a>())/1024/1024);
<a name="l00159"></a>00159                 strcat(stTemp, stExtra);
<a name="l00160"></a>00160 
<a name="l00161"></a>00161 <span class="preprocessor">#endif</span>
<a name="l00162"></a>00162 <span class="preprocessor"></span>
<a name="l00163"></a>00163                 <span class="keywordflow">if</span> (<a class="code" href="classBaseApp.html#ad4bb2d71a45ea06b880fa1b5e512a884">GetFont</a>(<a class="code" href="BaseApp_8h.html#a2e76f2763cbe7ef26f60343a0024e198a304227491dc5dac288c794f02547c172">FONT_SMALL</a>)-&gt;IsLoaded())
<a name="l00164"></a>00164                 {
<a name="l00165"></a>00165                         <a class="code" href="classBaseApp.html#ad4bb2d71a45ea06b880fa1b5e512a884">GetFont</a>(<a class="code" href="BaseApp_8h.html#a2e76f2763cbe7ef26f60343a0024e198a304227491dc5dac288c794f02547c172">FONT_SMALL</a>)-&gt;<a class="code" href="classRTFont.html#a772ed3b1ed0724f0d74ae4a0de8fa4c6">DrawScaled</a>(2,2, stTemp, 0.7<a class="code" href="Renderer_2GL_2glext_8h.html#aba8ad56949f59242bc167b073dae3715">f</a>);
<a name="l00166"></a>00166                 }
<a name="l00167"></a>00167         }
<a name="l00168"></a>00168 
<a name="l00169"></a>00169         <span class="comment">//draw the console messages?</span>
<a name="l00170"></a>00170         <span class="keywordflow">if</span> (<a class="code" href="classBaseApp.html#a4ca3a4055a595c3e779c4e9a3f38a98d">GetConsoleVisible</a>())
<a name="l00171"></a>00171         {
<a name="l00172"></a>00172                 <a class="code" href="BaseApp_8cpp.html#a45a6d04d136e0c40ce00eed0610ff4e7">DrawConsole</a>();
<a name="l00173"></a>00173         }
<a name="l00174"></a>00174 
<a name="l00175"></a>00175         <span class="keywordflow">switch</span> (<a class="code" href="classBaseApp.html#af9082dc427e82017b8a3b0929f443865">GetLastError</a>())
<a name="l00176"></a>00176         {
<a name="l00177"></a>00177         <span class="keywordflow">case</span> <a class="code" href="classBaseApp.html#a1036e19fe9d27a4cac8c82fc6271e602a021827402f1a836f1f1388a1fc570df0">ERROR_MEM</a>:
<a name="l00178"></a>00178                 <a class="code" href="classBaseApp.html#ad4bb2d71a45ea06b880fa1b5e512a884">GetFont</a>(<a class="code" href="BaseApp_8h.html#a2e76f2763cbe7ef26f60343a0024e198a304227491dc5dac288c794f02547c172">FONT_SMALL</a>)-&gt;<a class="code" href="classRTFont.html#a772ed3b1ed0724f0d74ae4a0de8fa4c6">DrawScaled</a>(2,14, <span class="stringliteral">&quot;LOW MEM!&quot;</span>, 0.7<a class="code" href="Renderer_2GL_2glext_8h.html#aba8ad56949f59242bc167b073dae3715">f</a>);
<a name="l00179"></a>00179                 <span class="keywordflow">break</span>;
<a name="l00180"></a>00180 
<a name="l00181"></a>00181         <span class="keywordflow">case</span> <a class="code" href="classBaseApp.html#a1036e19fe9d27a4cac8c82fc6271e602a4a256d944111430fe91554da777eb6ca">ERROR_SPACE</a>:
<a name="l00182"></a>00182                 <a class="code" href="classBaseApp.html#ad4bb2d71a45ea06b880fa1b5e512a884">GetFont</a>(<a class="code" href="BaseApp_8h.html#a2e76f2763cbe7ef26f60343a0024e198a304227491dc5dac288c794f02547c172">FONT_SMALL</a>)-&gt;<a class="code" href="classRTFont.html#a772ed3b1ed0724f0d74ae4a0de8fa4c6">DrawScaled</a>(2,14, <span class="stringliteral">&quot;LOW STORAGE SPACE!&quot;</span>, 0.7<a class="code" href="Renderer_2GL_2glext_8h.html#aba8ad56949f59242bc167b073dae3715">f</a>);
<a name="l00183"></a>00183                 <span class="keywordflow">break</span>;
<a name="l00184"></a>00184             
<a name="l00185"></a>00185         <span class="keywordflow">case</span> <a class="code" href="classBaseApp.html#a1036e19fe9d27a4cac8c82fc6271e602a714fb9de5c61aa6ade1969f0d0c463aa">ERROR_NONE</a>:
<a name="l00186"></a>00186             
<a name="l00187"></a>00187         <span class="keywordflow">break</span>;
<a name="l00188"></a>00188         }
<a name="l00189"></a>00189 
<a name="l00190"></a>00190         <a class="code" href="GLESUtils_8cpp.html#aaecd6106d849b5b0fd205753c3ee7c42">SetupOrtho</a>();
<a name="l00191"></a>00191         g_globalBatcher.<a class="code" href="classRenderBatcher.html#a591ad1906b8683de45ed8a7c86043151">Flush</a>();
<a name="l00192"></a>00192 }
<a name="l00193"></a>00193 
<a name="l00194"></a><a class="code" href="classBaseApp.html#a6f7b9dab5bee920cf727acca823a9bea">00194</a> <span class="keywordtype">void</span> <a class="code" href="classBaseApp.html#a6f7b9dab5bee920cf727acca823a9bea">BaseApp::Update</a>()
<a name="l00195"></a>00195 {
<a name="l00196"></a>00196         <a class="code" href="classBaseApp.html#aeacba6f700263177e258017656c8220d">m_gameTimer</a>.<a class="code" href="classGameTimer.html#a2204f9677932c79a639418eecffa9714">Update</a>();
<a name="l00197"></a>00197         <span class="keywordflow">if</span> (<a class="code" href="BaseApp_8h.html#a11454091168162d8f3991461725aa24f">GetMessageManager</a>()) <a class="code" href="BaseApp_8h.html#a11454091168162d8f3991461725aa24f">GetMessageManager</a>()-&gt;<a class="code" href="classMessageManager.html#a95b2ff00cd36d1b8c95c11316a8e23da">Update</a>();
<a name="l00198"></a>00198         <span class="keywordflow">if</span> (<a class="code" href="BaseApp_8h.html#ae540dadab1f412451b29de16f58ab139">GetAudioManager</a>()) <a class="code" href="BaseApp_8h.html#ae540dadab1f412451b29de16f58ab139">GetAudioManager</a>()-&gt;<a class="code" href="classAudioManager.html#a9b57bdf330da067b63073f5d73a001d5" title="This method must be called periodically, e.g once every frame.">Update</a>();
<a name="l00199"></a>00199         <a class="code" href="classBaseApp.html#a13c885ff15f08c3c24dd1ce6bff58c57" title="Update signal for the game logic.">m_sig_update</a>(NULL);
<a name="l00200"></a>00200 }
<a name="l00201"></a>00201 
<a name="l00202"></a><a class="code" href="classBaseApp.html#a35a9a8c9a69a37339d8cb84a108b2cd6">00202</a> <span class="keywordtype">void</span> <a class="code" href="classBaseApp.html#a35a9a8c9a69a37339d8cb84a108b2cd6">BaseApp::OnScreenSizeChange</a>()
<a name="l00203"></a>00203 {
<a name="l00204"></a>00204         
<a name="l00205"></a>00205 <span class="preprocessor">#ifdef _DEBUG</span>
<a name="l00206"></a>00206 <span class="preprocessor"></span>        <span class="comment">//LogMsg(&quot;Changing screen-size to %d, %d, %d&quot;, GetScreenSizeX(), GetScreenSizeY(), GetOrientation());</span>
<a name="l00207"></a>00207 <span class="preprocessor">#endif</span>
<a name="l00208"></a>00208 <span class="preprocessor"></span>        
<a name="l00209"></a>00209         <a class="code" href="GLESUtils_8cpp.html#af1322cd897b08260c2df6da68fb44f6d">GenerateSetPerspectiveFOV</a>(C_APP_FOV, <a class="code" href="PlatformSetup_8cpp.html#a3b38aaa65dfcae39c0700887f36f1521" title="Returns the same as GetScreenSizeX() but as a float.">GetScreenSizeXf</a>()/ <a class="code" href="PlatformSetup_8cpp.html#a94a0deb0a111cc46d8f7285fd3f83838" title="Returns the same as GetScreenSizeY() but as a float.">GetScreenSizeYf</a>(),0.1<a class="code" href="Renderer_2GL_2glext_8h.html#aba8ad56949f59242bc167b073dae3715">f</a>,500.0<a class="code" href="Renderer_2GL_2glext_8h.html#aba8ad56949f59242bc167b073dae3715">f</a>);
<a name="l00210"></a>00210 }
<a name="l00211"></a>00211 
<a name="l00212"></a><a class="code" href="classBaseApp.html#ab50d5496e5a9f81de3fe078ad83dab0e">00212</a> <span class="keywordtype">void</span> <a class="code" href="classBaseApp.html#ab50d5496e5a9f81de3fe078ad83dab0e">BaseApp::SetConsoleVisible</a>( <span class="keywordtype">bool</span> bNew )
<a name="l00213"></a>00213 {
<a name="l00214"></a>00214         <a class="code" href="classBaseApp.html#a7235e28b6ba8e75531af50a268bd39e6">m_bConsoleVisible</a> = bNew;
<a name="l00215"></a>00215 }
<a name="l00216"></a>00216 
<a name="l00217"></a><a class="code" href="classBaseApp.html#a249ea9bc646b3ee92cf7a981c16fde7b">00217</a> <span class="keywordtype">void</span> <a class="code" href="classBaseApp.html#a249ea9bc646b3ee92cf7a981c16fde7b">BaseApp::OnMessage</a>(<a class="code" href="classMessage.html">Message</a> &amp;<a class="code" href="Renderer_2GL_2glext_8h.html#af593500c283bf1a787a6f947f503a5c2">m</a>)
<a name="l00218"></a>00218 {
<a name="l00219"></a>00219         <span class="keyword">static</span> <a class="code" href="classVariantList.html">VariantList</a> <a class="code" href="Renderer_2GL_2glext_8h.html#a4568fc090febc136eed4577a600739ca">v</a>;
<a name="l00220"></a>00220         
<a name="l00221"></a>00221         v.<a class="code" href="classVariantList.html#af83080c59e04a145ab3cd4051502c7c3">Reset</a>();
<a name="l00222"></a>00222         
<a name="l00223"></a>00223         <span class="keywordflow">switch</span> (m.<a class="code" href="classMessage.html#ae4fdea8aa261d59e254b55db606f99fb">GetClass</a>())
<a name="l00224"></a>00224         {
<a name="l00225"></a>00225                 <span class="keywordflow">case</span> <a class="code" href="MessageManager_8h.html#aaa0f1ec75388ff537deec2b292792d7eae612618e2e94bb639153e9b0e4188ef0">MESSAGE_CLASS_GUI</a>:
<a name="l00226"></a>00226                         <span class="keywordflow">switch</span> (m.<a class="code" href="classMessage.html#a90210f98735c1ed9cc0efa200121364a">GetType</a>())
<a name="l00227"></a>00227                         {
<a name="l00228"></a>00228                         
<a name="l00229"></a>00229                         <span class="keywordflow">case</span> <a class="code" href="MessageManager_8h.html#a700ed30d49bfe436323e17539d3a0010a62a072d43e11c16229b536509a3dc1b8">MESSAGE_TYPE_GUI_CLICK_START</a>:
<a name="l00230"></a>00230                         <span class="keywordflow">case</span> <a class="code" href="MessageManager_8h.html#a700ed30d49bfe436323e17539d3a0010a7f2d808ba01bebb86035466a59744aee">MESSAGE_TYPE_GUI_CLICK_END</a>:
<a name="l00231"></a>00231                                 {
<a name="l00232"></a>00232                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(0).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>((<span class="keywordtype">float</span>)m.<a class="code" href="classMessage.html#a90210f98735c1ed9cc0efa200121364a">GetType</a>());
<a name="l00233"></a>00233                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(1).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>(<span class="keywordtype">float</span>(m.<a class="code" href="classMessage.html#a06e5f10fce89602a8c1ac82c92af2809">GetParm1</a>()), <span class="keywordtype">float</span>(m.<a class="code" href="classMessage.html#a417e62e89c721b5261ff26b85320a992">GetParm2</a>()) );
<a name="l00234"></a>00234                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(2).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>(<a class="code" href="PlatformSetupAndroid_8h.html#acbd4acd0d29e2d6c43104827f77d9cd2">uint32</a>(m.<a class="code" href="classMessage.html#a808d5cabf345c5708fe5099299654cd3">GetParm3</a>()));
<a name="l00235"></a>00235                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(3).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>(m.<a class="code" href="classMessage.html#afa783415097d3c1e8991bd35d6ff94d2">GetParm4</a>());
<a name="l00236"></a>00236                         
<a name="l00237"></a>00237                                         <span class="keywordflow">if</span> (m.<a class="code" href="classMessage.html#a90210f98735c1ed9cc0efa200121364a">GetType</a>() == <a class="code" href="MessageManager_8h.html#a700ed30d49bfe436323e17539d3a0010a62a072d43e11c16229b536509a3dc1b8">MESSAGE_TYPE_GUI_CLICK_START</a>)
<a name="l00238"></a>00238                                         {
<a name="l00239"></a>00239                                         <span class="comment">//      LogMsg(&quot;Clicked finger %d, down is %d&quot;, m.GetParm3(), (int)m_touchTracker[m.GetParm3()].IsDown());</span>
<a name="l00240"></a>00240                                                 <a class="code" href="classBaseApp.html#aa7398481bc9b0bdf9e54f246f502c773">m_touchTracker</a>[m.<a class="code" href="classMessage.html#a808d5cabf345c5708fe5099299654cd3">GetParm3</a>()].SetIsDown(<span class="keyword">true</span>);
<a name="l00241"></a>00241                                                 <a class="code" href="classBaseApp.html#aa7398481bc9b0bdf9e54f246f502c773">m_touchTracker</a>[m.<a class="code" href="classMessage.html#a808d5cabf345c5708fe5099299654cd3">GetParm3</a>()].SetPos(v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(1).<a class="code" href="classVariant.html#a623fdb9f51669ff8bfda1b6b268bbaa6">GetVector2</a>());
<a name="l00242"></a>00242                                                 <a class="code" href="classBaseApp.html#aa7398481bc9b0bdf9e54f246f502c773">m_touchTracker</a>[m.<a class="code" href="classMessage.html#a808d5cabf345c5708fe5099299654cd3">GetParm3</a>()].SetWasHandled(<span class="keyword">false</span>);
<a name="l00243"></a>00243                                                 <a class="code" href="classBaseApp.html#aa7398481bc9b0bdf9e54f246f502c773">m_touchTracker</a>[m.<a class="code" href="classMessage.html#a808d5cabf345c5708fe5099299654cd3">GetParm3</a>()].SetWasPreHandled(<span class="keyword">false</span>);
<a name="l00244"></a>00244                                         } <span class="keywordflow">else</span>
<a name="l00245"></a>00245                                         {
<a name="l00246"></a>00246                                         <span class="comment">//      LogMsg(&quot;Released finger %d, down is %d&quot;, m.GetParm3(), (int)m_touchTracker[m.GetParm3()].IsDown());</span>
<a name="l00247"></a>00247                                                 <a class="code" href="classBaseApp.html#aa7398481bc9b0bdf9e54f246f502c773">m_touchTracker</a>[m.<a class="code" href="classMessage.html#a808d5cabf345c5708fe5099299654cd3">GetParm3</a>()].SetIsDown(<span class="keyword">false</span>);
<a name="l00248"></a>00248                                         }
<a name="l00249"></a>00249 
<a name="l00250"></a>00250 
<a name="l00251"></a>00251                                         <a class="code" href="classBaseApp.html#ab936f979313be63640fadf788d27ffd3" title="Taps, clicks, and basic keyboard input.">m_sig_input</a>(&amp;v);
<a name="l00252"></a>00252                                         <span class="keywordflow">break</span>;
<a name="l00253"></a>00253                                 }
<a name="l00254"></a>00254                         
<a name="l00255"></a>00255                         <span class="keywordflow">case</span> <a class="code" href="MessageManager_8h.html#a700ed30d49bfe436323e17539d3a0010aff54ad3a33fb04dca784df64b2e5e3ee">MESSAGE_TYPE_GUI_CLICK_MOVE</a>:
<a name="l00256"></a>00256                         <span class="keywordflow">case</span> <a class="code" href="MessageManager_8h.html#a700ed30d49bfe436323e17539d3a0010a12511c2260c1ad05ad9446c71f2a10d4">MESSAGE_TYPE_GUI_CLICK_MOVE_RAW</a>:
<a name="l00257"></a>00257                                 {
<a name="l00258"></a>00258                                 
<a name="l00259"></a>00259                                         <span class="keywordflow">if</span> (!<a class="code" href="classBaseApp.html#aa7398481bc9b0bdf9e54f246f502c773">m_touchTracker</a>[m.<a class="code" href="classMessage.html#a808d5cabf345c5708fe5099299654cd3">GetParm3</a>()].IsDown())
<a name="l00260"></a>00260                                         {
<a name="l00261"></a>00261                                                 <span class="comment">//ignore this, we don&#39;t want a move message from something that isn&#39;t fricken&#39; down.  At least</span>
<a name="l00262"></a>00262                                                 <span class="comment">//one known HP device is known to do this...</span>
<a name="l00263"></a>00263                                                 <span class="keywordflow">break</span>;
<a name="l00264"></a>00264                                         }
<a name="l00265"></a>00265 
<a name="l00266"></a>00266                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(0).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>(<span class="keywordtype">float</span>(m.<a class="code" href="classMessage.html#a90210f98735c1ed9cc0efa200121364a">GetType</a>()));
<a name="l00267"></a>00267                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(1).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>(<span class="keywordtype">float</span>(m.<a class="code" href="classMessage.html#a06e5f10fce89602a8c1ac82c92af2809">GetParm1</a>()), <span class="keywordtype">float</span>(m.<a class="code" href="classMessage.html#a417e62e89c721b5261ff26b85320a992">GetParm2</a>()) );
<a name="l00268"></a>00268                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(2).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>(<a class="code" href="PlatformSetupAndroid_8h.html#acbd4acd0d29e2d6c43104827f77d9cd2">uint32</a>(m.<a class="code" href="classMessage.html#a808d5cabf345c5708fe5099299654cd3">GetParm3</a>()));
<a name="l00269"></a>00269                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(3).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>(m.<a class="code" href="classMessage.html#afa783415097d3c1e8991bd35d6ff94d2">GetParm4</a>());
<a name="l00270"></a>00270 
<a name="l00271"></a>00271                                         <span class="keywordflow">if</span> (m.<a class="code" href="classMessage.html#a90210f98735c1ed9cc0efa200121364a">GetType</a>() == <a class="code" href="MessageManager_8h.html#a700ed30d49bfe436323e17539d3a0010aff54ad3a33fb04dca784df64b2e5e3ee">MESSAGE_TYPE_GUI_CLICK_MOVE</a>)
<a name="l00272"></a>00272                                         {
<a name="l00273"></a>00273                                                 <a class="code" href="classBaseApp.html#aa7398481bc9b0bdf9e54f246f502c773">m_touchTracker</a>[m.<a class="code" href="classMessage.html#a808d5cabf345c5708fe5099299654cd3">GetParm3</a>()].SetPos(v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(1).<a class="code" href="classVariant.html#a623fdb9f51669ff8bfda1b6b268bbaa6">GetVector2</a>());
<a name="l00274"></a>00274                                         }
<a name="l00275"></a>00275 
<a name="l00276"></a>00276                                         <span class="keywordflow">if</span> (<a class="code" href="classBaseApp.html#ac4e5e806e955b4c58c454c6e54f1e8ab">m_inputMode</a> == <a class="code" href="BaseApp_8h.html#a058e68b668aa1f4fd58f2e6bfb985481abdd7a740be45d3aa42b2425b6ee34601">INPUT_MODE_NORMAL</a>)
<a name="l00277"></a>00277                                         {
<a name="l00278"></a>00278                                                 <a class="code" href="classBaseApp.html#ab936f979313be63640fadf788d27ffd3" title="Taps, clicks, and basic keyboard input.">m_sig_input</a>(&amp;v);
<a name="l00279"></a>00279                                         } <span class="keywordflow">else</span>
<a name="l00280"></a>00280                                         {
<a name="l00281"></a>00281                                                 <a class="code" href="classBaseApp.html#a1cb512ee427a21dbafe323cc28eca143" title="&quot;Move&quot; touch messages.">m_sig_input_move</a>(&amp;v);
<a name="l00282"></a>00282                                         }
<a name="l00283"></a>00283 
<a name="l00284"></a>00284                                         <span class="keywordflow">break</span>;
<a name="l00285"></a>00285                                 }
<a name="l00286"></a>00286                         
<a name="l00287"></a>00287                         <span class="keywordflow">case</span> <a class="code" href="MessageManager_8h.html#a700ed30d49bfe436323e17539d3a0010a5a44c9afa41028cdd386748af4e9dd06">MESSAGE_TYPE_GUI_ACCELEROMETER</a>:
<a name="l00288"></a>00288                                 {
<a name="l00289"></a>00289                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(0).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>((<span class="keywordtype">float</span>)m.<a class="code" href="classMessage.html#a90210f98735c1ed9cc0efa200121364a">GetType</a>());
<a name="l00290"></a>00290                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(1).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>(m.<a class="code" href="classMessage.html#ad10ead8df00afe95f2b0edd113004259">Get</a>().<a class="code" href="classVariant.html#af66c3081e5e4c4a1d022fe609245a7b8">GetVector3</a>());
<a name="l00291"></a>00291                                         <a class="code" href="classBaseApp.html#a6b0e428fefd0b344b5ec2d714f18104e" title="Accelerometer data from iphone.">m_sig_accel</a>(&amp;v);                                
<a name="l00292"></a>00292                                 }
<a name="l00293"></a>00293                                 <span class="keywordflow">break</span>;
<a name="l00294"></a>00294                         <span class="comment">//like MESSAGE_TYPE_GUI_CHAR, but handles up AND down events, and ignores things like key-repeat, better for</span>
<a name="l00295"></a>00295                         <span class="comment">//arcade action</span>
<a name="l00296"></a>00296                         <span class="keywordflow">case</span> <a class="code" href="MessageManager_8h.html#a700ed30d49bfe436323e17539d3a0010a0dc81596f38d348bca4f3bc9c5215c0b">MESSAGE_TYPE_GUI_CHAR_RAW</a>:
<a name="l00297"></a>00297                                 {
<a name="l00298"></a>00298                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(0).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>(<a class="code" href="PlatformSetupAndroid_8h.html#acbd4acd0d29e2d6c43104827f77d9cd2">uint32</a>(m.<a class="code" href="classMessage.html#a06e5f10fce89602a8c1ac82c92af2809">GetParm1</a>()));
<a name="l00299"></a>00299                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(1).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>(<a class="code" href="PlatformSetupAndroid_8h.html#acbd4acd0d29e2d6c43104827f77d9cd2">uint32</a>(m.<a class="code" href="classMessage.html#a417e62e89c721b5261ff26b85320a992">GetParm2</a>()));
<a name="l00300"></a>00300                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(2).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>(<a class="code" href="PlatformSetupAndroid_8h.html#acbd4acd0d29e2d6c43104827f77d9cd2">uint32</a>(m.<a class="code" href="classMessage.html#a808d5cabf345c5708fe5099299654cd3">GetParm3</a>()));
<a name="l00301"></a>00301                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(3).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>(m.<a class="code" href="classMessage.html#afa783415097d3c1e8991bd35d6ff94d2">GetParm4</a>());
<a name="l00302"></a>00302                                         <a class="code" href="classBaseApp.html#aae54ae2835559f9e692fbba605de1458" title="For raw data from keyboards that give pressed/released messages.">m_sig_raw_keyboard</a>(&amp;v);
<a name="l00303"></a>00303                                 }
<a name="l00304"></a>00304                                 <span class="keywordflow">break</span>;
<a name="l00305"></a>00305 
<a name="l00306"></a>00306                         <span class="comment">//usually used for text input</span>
<a name="l00307"></a>00307                         <span class="keywordflow">case</span> <a class="code" href="MessageManager_8h.html#a700ed30d49bfe436323e17539d3a0010a28f5b06e02b343a08d3c0f6f6bcd80a3">MESSAGE_TYPE_GUI_CHAR</a>:
<a name="l00308"></a>00308                                 {
<a name="l00309"></a>00309 <span class="preprocessor">#ifdef _DEBUG</span>
<a name="l00310"></a>00310 <span class="preprocessor"></span>                                        <span class="comment">//LogMsg(&quot;Got char: %c (%d)&quot;, (char)m.GetParm1(), int(m.GetParm1()));</span>
<a name="l00311"></a>00311 <span class="preprocessor">#endif</span>
<a name="l00312"></a>00312 <span class="preprocessor"></span>                                        v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(0).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>((<span class="keywordtype">float</span>)m.<a class="code" href="classMessage.html#a90210f98735c1ed9cc0efa200121364a">GetType</a>());
<a name="l00313"></a>00313                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(1).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>(0,0);
<a name="l00314"></a>00314                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(2).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>(<a class="code" href="PlatformSetupAndroid_8h.html#acbd4acd0d29e2d6c43104827f77d9cd2">uint32</a>(m.<a class="code" href="classMessage.html#a06e5f10fce89602a8c1ac82c92af2809">GetParm1</a>()));
<a name="l00315"></a>00315                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(3).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>(m.<a class="code" href="classMessage.html#afa783415097d3c1e8991bd35d6ff94d2">GetParm4</a>());
<a name="l00316"></a>00316                                         <a class="code" href="classBaseApp.html#ab936f979313be63640fadf788d27ffd3" title="Taps, clicks, and basic keyboard input.">m_sig_input</a>(&amp;v);
<a name="l00317"></a>00317                                 }
<a name="l00318"></a>00318                                 <span class="keywordflow">break</span>;
<a name="l00319"></a>00319 
<a name="l00320"></a>00320                         <span class="keywordflow">case</span> <a class="code" href="MessageManager_8h.html#a700ed30d49bfe436323e17539d3a0010ab55c432270b3ef08e732d870a177e4ec">MESSAGE_TYPE_GUI_PASTE</a>:
<a name="l00321"></a>00321                                 {
<a name="l00322"></a>00322                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(0).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>((<span class="keywordtype">float</span>)m.<a class="code" href="classMessage.html#a90210f98735c1ed9cc0efa200121364a">GetType</a>());
<a name="l00323"></a>00323                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(1).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>(0,0);
<a name="l00324"></a>00324                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(2).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>(m.<a class="code" href="classMessage.html#ad10ead8df00afe95f2b0edd113004259">Get</a>());
<a name="l00325"></a>00325                                         <a class="code" href="classBaseApp.html#ab936f979313be63640fadf788d27ffd3" title="Taps, clicks, and basic keyboard input.">m_sig_input</a>(&amp;v);
<a name="l00326"></a>00326                                         <span class="keywordflow">break</span>;
<a name="l00327"></a>00327                                 }
<a name="l00328"></a>00328         
<a name="l00329"></a>00329                         <span class="keywordflow">case</span> <a class="code" href="MessageManager_8h.html#a700ed30d49bfe436323e17539d3a0010aedbbf1ebda825b0905c7be36d0b3d6a5">MESSAGE_TYPE_GUI_TRACKBALL</a>:
<a name="l00330"></a>00330                                 {
<a name="l00331"></a>00331                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(0).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>((<span class="keywordtype">float</span>)m.<a class="code" href="classMessage.html#a90210f98735c1ed9cc0efa200121364a">GetType</a>());
<a name="l00332"></a>00332                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(1).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>(m.<a class="code" href="classMessage.html#ad10ead8df00afe95f2b0edd113004259">Get</a>().<a class="code" href="classVariant.html#af66c3081e5e4c4a1d022fe609245a7b8">GetVector3</a>());
<a name="l00333"></a>00333                                         <a class="code" href="classBaseApp.html#a19e83ebce77b075643cd9f3454496d9d" title="Used for android trackball move data.">m_sig_trackball</a>(&amp;v);
<a name="l00334"></a>00334                                         <span class="keywordflow">break</span>;
<a name="l00335"></a>00335                                 }
<a name="l00336"></a>00336 
<a name="l00337"></a>00337                         <span class="keywordflow">case</span> <a class="code" href="MessageManager_8h.html#a700ed30d49bfe436323e17539d3a0010aeffada27827a1bf6f4bccf4ca95e8f14">MESSAGE_TYPE_HW_TOUCH_KEYBOARD_WILL_SHOW</a>:
<a name="l00338"></a>00338                         <span class="keywordflow">case</span> <a class="code" href="MessageManager_8h.html#a700ed30d49bfe436323e17539d3a0010aa73e9a8243825949cb6da45fcd47d72c">MESSAGE_TYPE_HW_TOUCH_KEYBOARD_WILL_HIDE</a>:
<a name="l00339"></a>00339                                 {
<a name="l00340"></a>00340                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(0).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>((<span class="keywordtype">float</span>)m.<a class="code" href="classMessage.html#a90210f98735c1ed9cc0efa200121364a">GetType</a>());
<a name="l00341"></a>00341                                         <a class="code" href="classBaseApp.html#ae61e455166e7236f6235bbbe6241e866">m_sig_hardware</a>(&amp;v);
<a name="l00342"></a>00342                                         <span class="keywordflow">break</span>;
<a name="l00343"></a>00343                                 }
<a name="l00344"></a>00344 
<a name="l00345"></a>00345 
<a name="l00346"></a>00346                         <span class="keywordflow">case</span> <a class="code" href="MessageManager_8h.html#a700ed30d49bfe436323e17539d3a0010afd6e1c3d04bcfa990b1bf81dd52d2123">MESSAGE_TYPE_OS_CONNECTION_CHECKED</a>:
<a name="l00347"></a>00347                                 {
<a name="l00348"></a>00348                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(0).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>((<span class="keywordtype">float</span>)m.<a class="code" href="classMessage.html#a90210f98735c1ed9cc0efa200121364a">GetType</a>());
<a name="l00349"></a>00349                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(1).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>(<span class="keywordtype">float</span>(m.<a class="code" href="classMessage.html#a06e5f10fce89602a8c1ac82c92af2809">GetParm1</a>()), <span class="keywordtype">float</span>(m.<a class="code" href="classMessage.html#a417e62e89c721b5261ff26b85320a992">GetParm2</a>()) );
<a name="l00350"></a>00350                                         <a class="code" href="classBaseApp.html#ab4744d2eac714ff3d0d5a27be82c3a21" title="Messages from the platform itself.">m_sig_os</a>(&amp;v);
<a name="l00351"></a>00351                                 }
<a name="l00352"></a>00352                                 <span class="keywordflow">break</span>;
<a name="l00353"></a>00353                         
<a name="l00354"></a>00354                         <span class="keywordflow">case</span> <a class="code" href="MessageManager_8h.html#a700ed30d49bfe436323e17539d3a0010a4b3e48e2394c036e86d329347ac69fe9">MESSAGE_TYPE_GUI_TOGGLE_FULLSCREEN</a>:
<a name="l00355"></a>00355                                 {
<a name="l00356"></a>00356                                         <a class="code" href="classBaseApp.html#a4985ee16359a8a3e0c150944cd70ff35">OnFullscreenToggleRequest</a>();
<a name="l00357"></a>00357                                 }
<a name="l00358"></a>00358                                 <span class="keywordflow">break</span>;
<a name="l00359"></a>00359 
<a name="l00360"></a>00360                         <span class="keywordflow">case</span> <a class="code" href="MessageManager_8h.html#a700ed30d49bfe436323e17539d3a0010a932f078fecf0fc7c272bc228c1b575c8">MESSAGE_TYPE_APP_VERSION</a>:
<a name="l00361"></a>00361                                 {
<a name="l00362"></a>00362                                         <a class="code" href="classBaseApp.html#a74ce175e82e8ddf0e7e3e5c95e046ae7">m_version</a> = m.<a class="code" href="classMessage.html#a44abed0364b1eb3a7f222b320cec9ab3">GetStringParm</a>();
<a name="l00363"></a>00363                                         <span class="keywordflow">break</span>;
<a name="l00364"></a>00364                                 }
<a name="l00365"></a>00365                 
<a name="l00366"></a>00366                         <span class="keywordflow">case</span> <a class="code" href="MessageManager_8h.html#a700ed30d49bfe436323e17539d3a0010adf746d1e1403896564bcd79cce72db64">MESSAGE_TYPE_GUI_MOUSEWHEEL</a>:
<a name="l00367"></a>00367                                 {
<a name="l00368"></a>00368                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(0).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>((<span class="keywordtype">float</span>)m.<a class="code" href="classMessage.html#a90210f98735c1ed9cc0efa200121364a">GetType</a>());
<a name="l00369"></a>00369                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(1).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>(<span class="keywordtype">float</span>(m.<a class="code" href="classMessage.html#a06e5f10fce89602a8c1ac82c92af2809">GetParm1</a>()), <span class="keywordtype">float</span>(m.<a class="code" href="classMessage.html#a417e62e89c721b5261ff26b85320a992">GetParm2</a>()) );
<a name="l00370"></a>00370                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(2).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>(<a class="code" href="PlatformSetupAndroid_8h.html#acbd4acd0d29e2d6c43104827f77d9cd2">uint32</a>(m.<a class="code" href="classMessage.html#a808d5cabf345c5708fe5099299654cd3">GetParm3</a>()));
<a name="l00371"></a>00371                                         v.<a class="code" href="classVariantList.html#ae09016f46aba2be2557f3fafe75a6900">Get</a>(3).<a class="code" href="classVariant.html#aad26833544d00075f151ac07fa0297b3">Set</a>(m.<a class="code" href="classMessage.html#afa783415097d3c1e8991bd35d6ff94d2">GetParm4</a>());
<a name="l00372"></a>00372 
<a name="l00373"></a>00373                                         <a class="code" href="classBaseApp.html#ab936f979313be63640fadf788d27ffd3" title="Taps, clicks, and basic keyboard input.">m_sig_input</a>(&amp;v);
<a name="l00374"></a>00374                                         <span class="keywordflow">break</span>;
<a name="l00375"></a>00375                                 }
<a name="l00376"></a>00376                         }
<a name="l00377"></a>00377                 
<a name="l00378"></a>00378         <span class="keywordflow">break</span>;
<a name="l00379"></a>00379                 
<a name="l00380"></a>00380         <span class="keywordflow">case</span> <a class="code" href="MessageManager_8h.html#aaa0f1ec75388ff537deec2b292792d7eaf3edbb9029b9aae0f56402b5ea07c82a">MESSAGE_CLASS_GAME</a>:
<a name="l00381"></a>00381 
<a name="l00382"></a>00382                 <span class="keywordflow">switch</span> (m.<a class="code" href="classMessage.html#a90210f98735c1ed9cc0efa200121364a">GetType</a>())
<a name="l00383"></a>00383                 {
<a name="l00384"></a>00384                 <span class="keywordflow">case</span> <a class="code" href="MessageManager_8h.html#a700ed30d49bfe436323e17539d3a0010a4686ee7eaa520f63002d3c81b6df3807">MESSAGE_TYPE_PLAY_SOUND</a>:
<a name="l00385"></a>00385                         <span class="keywordflow">if</span> (<a class="code" href="BaseApp_8h.html#ae540dadab1f412451b29de16f58ab139">GetAudioManager</a>())
<a name="l00386"></a>00386                         {
<a name="l00387"></a>00387                                 <a class="code" href="BaseApp_8h.html#ae540dadab1f412451b29de16f58ab139">GetAudioManager</a>()-&gt;<a class="code" href="classAudioManager.html#a2c144fcd407dae864d60b9aa8cb62726" title="Plays an audio specified by a file name.">Play</a>(m.<a class="code" href="classMessage.html#a34f475b0f979b11bf7d9fe879a22b71c">GetVarName</a>());
<a name="l00388"></a>00388                         }
<a name="l00389"></a>00389                         <span class="keywordflow">break</span>;
<a name="l00390"></a>00390                 <span class="keywordflow">case</span> <a class="code" href="MessageManager_8h.html#a700ed30d49bfe436323e17539d3a0010ac30c123aa5773d29758889b5ba38f8dc">MESSAGE_TYPE_SET_SOUND_ENABLED</a>:
<a name="l00391"></a>00391                         <a class="code" href="BaseApp_8h.html#ae540dadab1f412451b29de16f58ab139">GetAudioManager</a>()-&gt;<a class="code" href="classAudioManager.html#a488e0e3bd40873f7364b96fe60ea419a" title="Enables or disables the playing of sounds.">SetSoundEnabled</a>(m.<a class="code" href="classMessage.html#ad10ead8df00afe95f2b0edd113004259">Get</a>().<a class="code" href="classVariant.html#a02c9fa88617102d1efcb991626cda39d">GetUINT32</a>() != 0);
<a name="l00392"></a>00392                         <span class="keywordflow">break</span>;
<a name="l00393"></a>00393                 <span class="keywordflow">case</span> <a class="code" href="MessageManager_8h.html#a700ed30d49bfe436323e17539d3a0010ad672acd922c0a1ded1bf74de3fad2e96">MESSAGE_TYPE_PRELOAD_SOUND</a>:
<a name="l00394"></a>00394                         <span class="keywordflow">if</span> (<a class="code" href="BaseApp_8h.html#ae540dadab1f412451b29de16f58ab139">GetAudioManager</a>())
<a name="l00395"></a>00395                         {
<a name="l00396"></a>00396                                 <a class="code" href="BaseApp_8h.html#ae540dadab1f412451b29de16f58ab139">GetAudioManager</a>()-&gt;<a class="code" href="classAudioManager.html#aa9471a2cc8150c7f5ea39deca030db19">Preload</a>(<a class="code" href="ResourceUtils_8cpp.html#acd2dff9753da108bbc4d95b1fabe9622">ReplaceMP3</a>(m.<a class="code" href="classMessage.html#a34f475b0f979b11bf7d9fe879a22b71c">GetVarName</a>()));
<a name="l00397"></a>00397                         }
<a name="l00398"></a>00398                         <span class="keywordflow">break</span>;
<a name="l00399"></a>00399 
<a name="l00400"></a>00400                 <span class="keywordflow">case</span> <a class="code" href="MessageManager_8h.html#a700ed30d49bfe436323e17539d3a0010a5cd14d2fdfc98293b23b473d81a2ca2e">MESSAGE_TYPE_PLAY_MUSIC</a>:
<a name="l00401"></a>00401                         <span class="keywordflow">if</span> (<a class="code" href="BaseApp_8h.html#ae540dadab1f412451b29de16f58ab139">GetAudioManager</a>())
<a name="l00402"></a>00402                         {
<a name="l00403"></a>00403                                 <a class="code" href="BaseApp_8h.html#ae540dadab1f412451b29de16f58ab139">GetAudioManager</a>()-&gt;<a class="code" href="classAudioManager.html#a2c144fcd407dae864d60b9aa8cb62726" title="Plays an audio specified by a file name.">Play</a>(<a class="code" href="ResourceUtils_8cpp.html#acd2dff9753da108bbc4d95b1fabe9622">ReplaceMP3</a>(m.<a class="code" href="classMessage.html#a34f475b0f979b11bf7d9fe879a22b71c">GetVarName</a>()), <span class="keyword">true</span>, <span class="keyword">true</span>);
<a name="l00404"></a>00404                         }
<a name="l00405"></a>00405                         <span class="keywordflow">break</span>;
<a name="l00406"></a>00406 
<a name="l00407"></a>00407                 <span class="keywordflow">case</span> <a class="code" href="MessageManager_8h.html#a700ed30d49bfe436323e17539d3a0010adb5eb19a01b35c64a5b32d3a6ea3f6bf">MESSAGE_TYPE_VIBRATE</a>:
<a name="l00408"></a>00408 
<a name="l00409"></a>00409                         <span class="keywordflow">if</span> (<a class="code" href="BaseApp_8h.html#ae540dadab1f412451b29de16f58ab139">GetAudioManager</a>())
<a name="l00410"></a>00410                         {
<a name="l00411"></a>00411                                 <a class="code" href="BaseApp_8h.html#ae540dadab1f412451b29de16f58ab139">GetAudioManager</a>()-&gt;<a class="code" href="classAudioManager.html#af64643e42bcda5a19dab18bf4a7d0e1c">Vibrate</a>(m.<a class="code" href="classMessage.html#ad10ead8df00afe95f2b0edd113004259">Get</a>().<a class="code" href="classVariant.html#a02c9fa88617102d1efcb991626cda39d">GetUINT32</a>());
<a name="l00412"></a>00412                         }
<a name="l00413"></a>00413                         <span class="keywordflow">break</span>;
<a name="l00414"></a>00414                 }
<a name="l00415"></a>00415                 <span class="keywordflow">break</span>;
<a name="l00416"></a>00416         }
<a name="l00417"></a>00417 }
<a name="l00418"></a>00418 
<a name="l00419"></a><a class="code" href="classBaseApp.html#a8c4775724ea459bdf155a6920a44d6db">00419</a> <span class="keywordtype">void</span> <a class="code" href="classBaseApp.html#a8c4775724ea459bdf155a6920a44d6db">BaseApp::AddOSMessage</a>( <a class="code" href="structOSMessage.html">OSMessage</a> &amp;<a class="code" href="Renderer_2GL_2glext_8h.html#af593500c283bf1a787a6f947f503a5c2">m</a> )
<a name="l00420"></a>00420 {
<a name="l00421"></a>00421         assert(<a class="code" href="BaseApp_8cpp.html#aef043c38b21bf52ff43fbca27a6cadb0">IsBaseAppInitted</a>() &amp;&amp; <span class="stringliteral">&quot;Base app should be initted before calling AddOSMessage&quot;</span>);
<a name="l00422"></a>00422 
<a name="l00423"></a>00423         <a class="code" href="classBaseApp.html#a45bc4652b0e0791df4a1b210a5890c6a">m_OSMessages</a>.push_back(m);
<a name="l00424"></a>00424 }
<a name="l00425"></a>00425 
<a name="l00426"></a><a class="code" href="classBaseApp.html#ae995a243b616341d6cd4549b1ee85706">00426</a> <span class="keywordtype">void</span> <a class="code" href="classBaseApp.html#ae995a243b616341d6cd4549b1ee85706">BaseApp::KillOSMessagesByType</a>(<a class="code" href="structOSMessage.html#a9fc98c3cc1a5a51feb7a977b01defadc">OSMessage::eMessageType</a> <a class="code" href="eglext_8h.html#a890efa53b3d7deeeced6f3a0d6653ed3">type</a>)
<a name="l00427"></a>00427 {
<a name="l00428"></a>00428         <span class="comment">//It&#39;s a deque, making it tricky to delete stuff from the middle.  I&#39;ll do it this way, speed isn&#39;t important</span>
<a name="l00429"></a>00429         <span class="comment">//as this is used rarely.</span>
<a name="l00430"></a>00430 
<a name="l00431"></a>00431         deque &lt;OSMessage&gt;::iterator itor = <a class="code" href="classBaseApp.html#a45bc4652b0e0791df4a1b210a5890c6a">m_OSMessages</a>.begin();
<a name="l00432"></a>00432 
<a name="l00433"></a>00433         deque &lt;OSMessage&gt; temp;
<a name="l00434"></a>00434 
<a name="l00435"></a>00435         <span class="keywordflow">for</span> (;itor != <a class="code" href="classBaseApp.html#a45bc4652b0e0791df4a1b210a5890c6a">m_OSMessages</a>.end(); itor++)
<a name="l00436"></a>00436         {
<a name="l00437"></a>00437                 <span class="keywordflow">if</span> (itor-&gt;m_type != type)
<a name="l00438"></a>00438                 {
<a name="l00439"></a>00439                         temp.push_back(*itor);
<a name="l00440"></a>00440                 }
<a name="l00441"></a>00441         }
<a name="l00442"></a>00442 
<a name="l00443"></a>00443         <a class="code" href="classBaseApp.html#a45bc4652b0e0791df4a1b210a5890c6a">m_OSMessages</a> = temp;
<a name="l00444"></a>00444 }
<a name="l00445"></a>00445 
<a name="l00446"></a><a class="code" href="classBaseApp.html#a613a344d0efb3819f467b39f39b0ab3a">00446</a> <a class="code" href="MessageManager_8h.html#a6ccdae1e5bdcea24cc3c7a814445e196">eTimingSystem</a> <a class="code" href="classBaseApp.html#a613a344d0efb3819f467b39f39b0ab3a">BaseApp::GetActiveTimingSystem</a>()
<a name="l00447"></a>00447 {
<a name="l00448"></a>00448         <span class="keywordflow">if</span> (<a class="code" href="classBaseApp.html#aa123e06927b2f5733ff364c2b2db6394">GetGameTickPause</a>()) <span class="keywordflow">return</span> <a class="code" href="MessageManager_8h.html#a6ccdae1e5bdcea24cc3c7a814445e196a1f41a724a7ed2283070514f600166e04">TIMER_SYSTEM</a>;
<a name="l00449"></a>00449         <span class="keywordflow">return</span> <a class="code" href="MessageManager_8h.html#a6ccdae1e5bdcea24cc3c7a814445e196a1a27463a0dbd838de0b8cc82322f5932">TIMER_GAME</a>;
<a name="l00450"></a>00450 }
<a name="l00451"></a>00451 
<a name="l00452"></a><a class="code" href="classBaseApp.html#a9162db74a1db0c90df0c0d03838aee0f">00452</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classBaseApp.html#a9162db74a1db0c90df0c0d03838aee0f">BaseApp::GetTickTimingSystem</a>( <a class="code" href="MessageManager_8h.html#a6ccdae1e5bdcea24cc3c7a814445e196">eTimingSystem</a> timingSystem )
<a name="l00453"></a>00453 {
<a name="l00454"></a>00454         <span class="keywordflow">if</span> (timingSystem == <a class="code" href="MessageManager_8h.html#a6ccdae1e5bdcea24cc3c7a814445e196a1f41a724a7ed2283070514f600166e04">TIMER_SYSTEM</a>) <span class="keywordflow">return</span> <a class="code" href="classBaseApp.html#aeacba6f700263177e258017656c8220d">m_gameTimer</a>.<a class="code" href="classGameTimer.html#a86621a997714d2ce0b44cf9d7d58c7fc">GetTick</a>();
<a name="l00455"></a>00455 
<a name="l00456"></a>00456         assert(timingSystem == <a class="code" href="MessageManager_8h.html#a6ccdae1e5bdcea24cc3c7a814445e196a1a27463a0dbd838de0b8cc82322f5932">TIMER_GAME</a>);
<a name="l00457"></a>00457         <span class="keywordflow">return</span> <a class="code" href="classBaseApp.html#aeacba6f700263177e258017656c8220d">m_gameTimer</a>.<a class="code" href="classGameTimer.html#ad080b099e71d0bf2a7ae070134cb4c31">GetGameTick</a>();
<a name="l00458"></a>00458 }
<a name="l00459"></a>00459 
<a name="l00460"></a><a class="code" href="PlatformSetup_8h.html#a7217cebc0d5d71425d7b83154d38a4aa">00460</a> <span class="keywordtype">void</span> <a class="code" href="BaseApp_8cpp.html#a7217cebc0d5d71425d7b83154d38a4aa">LogError</a> ( <span class="keyword">const</span> <span class="keywordtype">char</span>* traceStr, ... )
<a name="l00461"></a>00461 {
<a name="l00462"></a>00462         va_list argsVA;
<a name="l00463"></a>00463         <span class="keyword">const</span> <span class="keywordtype">int</span> logSize = 4096;
<a name="l00464"></a>00464         <span class="keywordtype">char</span> <a class="code" href="eglext_8h.html#a3667f558219c90437106b544a3ca00b8">buffer</a>[logSize];
<a name="l00465"></a>00465         memset ( (<span class="keywordtype">void</span>*)buffer, 0, logSize );
<a name="l00466"></a>00466 
<a name="l00467"></a>00467         va_start ( argsVA, traceStr );
<a name="l00468"></a>00468 <span class="preprocessor">#ifdef WIN32</span>
<a name="l00469"></a>00469 <span class="preprocessor"></span>        vsnprintf_s( buffer, logSize, logSize, traceStr, argsVA );
<a name="l00470"></a>00470 <span class="preprocessor">#else</span>
<a name="l00471"></a>00471 <span class="preprocessor"></span>        vsnprintf( buffer, logSize, traceStr, argsVA );
<a name="l00472"></a>00472 <span class="preprocessor">#endif</span>
<a name="l00473"></a>00473 <span class="preprocessor"></span>        va_end( argsVA );
<a name="l00474"></a>00474         <a class="code" href="AndroidUtils_8cpp.html#aaa5c9bf2289dec09f59ef2b7ba6c66ae">LogMsg</a>(<span class="stringliteral">&quot;ERROR: %s&quot;</span>, buffer);
<a name="l00475"></a>00475 
<a name="l00476"></a>00476         <a class="code" href="BaseApp_8h.html#a72086b48d24daf0a65dd20189a16bd16">GetBaseApp</a>()-&gt;<a class="code" href="classBaseApp.html#ab50d5496e5a9f81de3fe078ad83dab0e">SetConsoleVisible</a>(<span class="keyword">true</span>); <span class="comment">//make sure we see the error</span>
<a name="l00477"></a>00477         <span class="comment">//assert(!&quot;Got an error, your majesty...&quot;);</span>
<a name="l00478"></a>00478 }
<a name="l00479"></a>00479 
<a name="l00480"></a><a class="code" href="BaseApp_8h.html#a7b52066a9c1c1ce920514af253d1e812">00480</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="BaseApp_8cpp.html#a8335cabda3b97e427d7e0dfdc71f5591">GetTick</a>( <a class="code" href="MessageManager_8h.html#a6ccdae1e5bdcea24cc3c7a814445e196">eTimingSystem</a> timingSystem )
<a name="l00481"></a>00481 {
<a name="l00482"></a>00482         <span class="keywordflow">return</span> <a class="code" href="BaseApp_8h.html#a72086b48d24daf0a65dd20189a16bd16">GetBaseApp</a>()-&gt;<a class="code" href="classBaseApp.html#a9162db74a1db0c90df0c0d03838aee0f">GetTickTimingSystem</a>(timingSystem);
<a name="l00483"></a>00483 }
<a name="l00484"></a>00484 
<a name="l00485"></a><a class="code" href="BaseApp_8h.html#a80d1b76bcb3ebea56468438eb2af986b">00485</a> <a class="code" href="classResourceManager.html" title="A manager for resources.">ResourceManager</a> * <a class="code" href="BaseApp_8cpp.html#a80d1b76bcb3ebea56468438eb2af986b">GetResourceManager</a>()
<a name="l00486"></a>00486 {
<a name="l00487"></a>00487         <span class="keywordflow">return</span> <a class="code" href="BaseApp_8h.html#a72086b48d24daf0a65dd20189a16bd16">GetBaseApp</a>()-&gt;<a class="code" href="classBaseApp.html#ac399b081155a21d6d33953fd93df0b5b">GetResourceManager</a>();
<a name="l00488"></a>00488 }
<a name="l00489"></a>00489 
<a name="l00490"></a><a class="code" href="classBaseApp.html#a303f5fdc0cd96f4099e1c603d4f2a7b7">00490</a> <span class="keywordtype">void</span> <a class="code" href="classBaseApp.html#a303f5fdc0cd96f4099e1c603d4f2a7b7">BaseApp::SetManualRotationMode</a>( <span class="keywordtype">bool</span> bRotation )
<a name="l00491"></a>00491 {
<a name="l00492"></a>00492         <span class="comment">//if (GetPlatformID() == PLATFORM_ID_BBX) bRotation = false; //on BBX we never have to do that</span>
<a name="l00493"></a>00493         <a class="code" href="AndroidUtils_8cpp.html#aaa5c9bf2289dec09f59ef2b7ba6c66ae">LogMsg</a>(<span class="stringliteral">&quot;AppManualRotation set to %d&quot;</span>, <span class="keywordtype">int</span>(bRotation));
<a name="l00494"></a>00494         <a class="code" href="classBaseApp.html#a798518d8f8a50cc10a5fe075bb675bad">m_bManualRotation</a> = bRotation;
<a name="l00495"></a>00495 }
<a name="l00496"></a>00496 
<a name="l00497"></a><a class="code" href="classBaseApp.html#a6cf5d16deea9fbf598478e3e7b3ddaec">00497</a> <span class="keywordtype">void</span> <a class="code" href="classBaseApp.html#a6cf5d16deea9fbf598478e3e7b3ddaec">BaseApp::OnMemoryWarning</a>()
<a name="l00498"></a>00498 {
<a name="l00499"></a>00499         <a class="code" href="AndroidUtils_8cpp.html#aaa5c9bf2289dec09f59ef2b7ba6c66ae">LogMsg</a>(<span class="stringliteral">&quot;Got memory warning&quot;</span>);
<a name="l00500"></a>00500 }
<a name="l00501"></a>00501 
<a name="l00502"></a><a class="code" href="classBaseApp.html#aeddf8ac355a68f59350c05f64b7b9efb">00502</a> <span class="keywordtype">void</span> <a class="code" href="classBaseApp.html#aeddf8ac355a68f59350c05f64b7b9efb">BaseApp::OnEnterBackground</a>()
<a name="l00503"></a>00503 {
<a name="l00504"></a>00504         <span class="keywordflow">if</span> (!<a class="code" href="classBaseApp.html#a0f8d74511bf156f5381f504534ae5867">m_bIsInBackground</a>)
<a name="l00505"></a>00505         {
<a name="l00506"></a>00506                 <a class="code" href="classBaseApp.html#a0f8d74511bf156f5381f504534ae5867">m_bIsInBackground</a> = <span class="keyword">true</span>;
<a name="l00507"></a>00507 <span class="preprocessor">#ifdef _DEBUG   </span>
<a name="l00508"></a>00508 <span class="preprocessor"></span>                <a class="code" href="AndroidUtils_8cpp.html#aaa5c9bf2289dec09f59ef2b7ba6c66ae">LogMsg</a>(<span class="stringliteral">&quot;Entering background&quot;</span>);
<a name="l00509"></a>00509 <span class="preprocessor">#endif</span>
<a name="l00510"></a>00510 <span class="preprocessor"></span>         
<a name="l00511"></a>00511 <span class="preprocessor">        #ifndef PLATFORM_ANDROID</span>
<a name="l00512"></a>00512 <span class="preprocessor"></span>                <span class="keywordflow">if</span> (<a class="code" href="PlatformEnums_8h.html#a5eec67bdc9a66fa580686bcf211485f0" title="Gets the emulated platform id.">GetEmulatedPlatformID</a>() == <a class="code" href="PlatformEnums_8h.html#aaa43572fa440af9fa31b5ef4155975b2a4c56589fc030bd59718aaf643434c790">PLATFORM_ID_ANDROID</a>)
<a name="l00513"></a>00513                 <a class="code" href="classBaseApp.html#a9809967f0001d2d51a2b3fcf2d2ef14a" title="Signal to notify that it&#39;s time to release surfaces.">m_sig_unloadSurfaces</a>(); 
<a name="l00514"></a>00514 <span class="preprocessor">        #endif</span>
<a name="l00515"></a>00515 <span class="preprocessor"></span>        
<a name="l00516"></a>00516                 
<a name="l00517"></a>00517         <span class="keywordflow">if</span> (<a class="code" href="AndroidUtils_8cpp.html#a3793c2907a23f8de9955b72f10c7789b" title="Gets the platform id of the real running environment.">GetPlatformID</a>() != <a class="code" href="PlatformEnums_8h.html#aaa43572fa440af9fa31b5ef4155975b2a4c56589fc030bd59718aaf643434c790">PLATFORM_ID_ANDROID</a>)
<a name="l00518"></a>00518         {
<a name="l00519"></a>00519                 <span class="comment">//android will do it elsewhere, but for other platforms we fake this message here</span>
<a name="l00520"></a>00520                 <a class="code" href="classBaseApp.html#ae34181fc70304a3fababcbbdcbfa6dfe" title="Early signal that we are about to enter background.">m_sig_pre_enterbackground</a>(NULL); 
<a name="l00521"></a>00521         }
<a name="l00522"></a>00522 
<a name="l00523"></a>00523                 <a class="code" href="classBaseApp.html#ae7fc69fe80d3aeba8b5874a5990e14d2" title="Game lost focus.">m_sig_enterbackground</a>(NULL);
<a name="l00524"></a>00524         }
<a name="l00525"></a>00525 
<a name="l00526"></a>00526         <a class="code" href="BaseApp_8h.html#ae540dadab1f412451b29de16f58ab139">GetAudioManager</a>()-&gt;<a class="code" href="classAudioManager.html#a0855565db0ad8b0031c1af2235489dd5">Suspend</a>();
<a name="l00527"></a>00527         <span class="comment">//ResetTouches(); //Turns out we don&#39;t need this</span>
<a name="l00528"></a>00528     
<a name="l00529"></a>00529 }
<a name="l00530"></a>00530 
<a name="l00531"></a><a class="code" href="classBaseApp.html#a4a1bb54245313e867b3df65f6e6b0c11">00531</a> <span class="keywordtype">void</span> <a class="code" href="classBaseApp.html#a4a1bb54245313e867b3df65f6e6b0c11">BaseApp::OnEnterForeground</a>()
<a name="l00532"></a>00532 {
<a name="l00533"></a>00533         <a class="code" href="BaseApp_8h.html#ae540dadab1f412451b29de16f58ab139">GetAudioManager</a>()-&gt;<a class="code" href="classAudioManager.html#a47a71dd086645a3d18d69ade701cd2cc">Resume</a>();
<a name="l00534"></a>00534 
<a name="l00535"></a>00535         <span class="keywordflow">if</span> (<a class="code" href="classBaseApp.html#a0f8d74511bf156f5381f504534ae5867">m_bIsInBackground</a>)
<a name="l00536"></a>00536         {
<a name="l00537"></a>00537                 <a class="code" href="classBaseApp.html#a0f8d74511bf156f5381f504534ae5867">m_bIsInBackground</a> = <span class="keyword">false</span>;
<a name="l00538"></a>00538 <span class="preprocessor">#ifdef _DEBUG</span>
<a name="l00539"></a>00539 <span class="preprocessor"></span>                <a class="code" href="AndroidUtils_8cpp.html#aaa5c9bf2289dec09f59ef2b7ba6c66ae">LogMsg</a>(<span class="stringliteral">&quot;Entering foreground&quot;</span>);
<a name="l00540"></a>00540 <span class="preprocessor">#endif</span>
<a name="l00541"></a>00541 <span class="preprocessor"></span>        
<a name="l00542"></a>00542 <span class="preprocessor">        #ifndef PLATFORM_ANDROID</span>
<a name="l00543"></a>00543 <span class="preprocessor"></span>                <span class="keywordflow">if</span> (<a class="code" href="PlatformEnums_8h.html#a5eec67bdc9a66fa580686bcf211485f0" title="Gets the emulated platform id.">GetEmulatedPlatformID</a>() == <a class="code" href="PlatformEnums_8h.html#aaa43572fa440af9fa31b5ef4155975b2a4c56589fc030bd59718aaf643434c790">PLATFORM_ID_ANDROID</a>)
<a name="l00544"></a>00544                 {
<a name="l00545"></a>00545                         <a class="code" href="BaseApp_8h.html#a72086b48d24daf0a65dd20189a16bd16">GetBaseApp</a>()-&gt;<a class="code" href="classBaseApp.html#a4363b54dd50f8cc4200e4b195f066086" title="Signal to notify that it&#39;s time to reload surfaces.">m_sig_loadSurfaces</a>(); <span class="comment">//for anyone who cares</span>
<a name="l00546"></a>00546                 }
<a name="l00547"></a>00547 <span class="preprocessor">        #endif</span>
<a name="l00548"></a>00548 <span class="preprocessor"></span>
<a name="l00549"></a>00549 
<a name="l00550"></a>00550                 <a class="code" href="classBaseApp.html#aaee0be683732eb188792eb1d97cf6bdd" title="Game restored focus.">m_sig_enterforeground</a>(NULL);
<a name="l00551"></a>00551         }
<a name="l00552"></a>00552 }
<a name="l00553"></a>00553 
<a name="l00554"></a><a class="code" href="classBaseApp.html#aadf6b84f94acc8e420131959efd8c92a">00554</a> <span class="keywordtype">void</span> <a class="code" href="classBaseApp.html#aadf6b84f94acc8e420131959efd8c92a">BaseApp::AddCommandLineParm</a>( <span class="keywordtype">string</span> parm )
<a name="l00555"></a>00555 {
<a name="l00556"></a>00556         <a class="code" href="classBaseApp.html#a66550af38a890bb93d4edbba3bf96d36">m_commandLineParms</a>.push_back(parm);
<a name="l00557"></a>00557 }
<a name="l00558"></a>00558 
<a name="l00559"></a><a class="code" href="classBaseApp.html#a7c6d87230240606dcea10ada8270d05f">00559</a> vector&lt;string&gt; <a class="code" href="classBaseApp.html#a7c6d87230240606dcea10ada8270d05f">BaseApp::GetCommandLineParms</a>()
<a name="l00560"></a>00560 {
<a name="l00561"></a>00561         <span class="keywordflow">return</span> <a class="code" href="classBaseApp.html#a66550af38a890bb93d4edbba3bf96d36">m_commandLineParms</a>;
<a name="l00562"></a>00562 }
<a name="l00563"></a>00563 
<a name="l00564"></a><a class="code" href="classBaseApp.html#a934e061cfc980da766763a2d1cb95243">00564</a> <span class="keywordtype">void</span> <a class="code" href="classBaseApp.html#a934e061cfc980da766763a2d1cb95243">BaseApp::SetAccelerometerUpdateHz</a>(<span class="keywordtype">float</span> hz) <span class="comment">//another way to think of hz is &quot;how many times per second to update&quot;</span>
<a name="l00565"></a>00565 {
<a name="l00566"></a>00566         <a class="code" href="structOSMessage.html">OSMessage</a> o;
<a name="l00567"></a>00567         o.<a class="code" href="structOSMessage.html#a15a064581798f6bc8724440f285eacd7">m_type</a> = <a class="code" href="structOSMessage.html#a9fc98c3cc1a5a51feb7a977b01defadcab6adca9137c5f16082f80448c34c2ad3">OSMessage::MESSAGE_SET_ACCELEROMETER_UPDATE_HZ</a>;
<a name="l00568"></a>00568         o.<a class="code" href="structOSMessage.html#a61a7899985dd6f06be9b060b306eabc7">m_x</a> = hz;
<a name="l00569"></a>00569         <a class="code" href="BaseApp_8h.html#a72086b48d24daf0a65dd20189a16bd16">GetBaseApp</a>()-&gt;<a class="code" href="classBaseApp.html#a8c4775724ea459bdf155a6920a44d6db">AddOSMessage</a>(o);
<a name="l00570"></a>00570 }
<a name="l00571"></a>00571 
<a name="l00572"></a><a class="code" href="classBaseApp.html#a4276657fa81be24410a6f391155b249f">00572</a> <span class="keywordtype">void</span> <a class="code" href="classBaseApp.html#a4276657fa81be24410a6f391155b249f">BaseApp::SetAllowScreenDimming</a>(<span class="keywordtype">bool</span> bAllowDimming) 
<a name="l00573"></a>00573 {
<a name="l00574"></a>00574         <a class="code" href="structOSMessage.html">OSMessage</a> o;
<a name="l00575"></a>00575         o.<a class="code" href="structOSMessage.html#a15a064581798f6bc8724440f285eacd7">m_type</a> = <a class="code" href="structOSMessage.html#a9fc98c3cc1a5a51feb7a977b01defadca961da2fcdb7f6748b1df811e4fdc795c">OSMessage::MESSAGE_ALLOW_SCREEN_DIMMING</a>;
<a name="l00576"></a>00576     <span class="keywordflow">if</span> (bAllowDimming)
<a name="l00577"></a>00577     {
<a name="l00578"></a>00578         o.<a class="code" href="structOSMessage.html#a61a7899985dd6f06be9b060b306eabc7">m_x</a> = 1;
<a name="l00579"></a>00579     } <span class="keywordflow">else</span>
<a name="l00580"></a>00580     {
<a name="l00581"></a>00581         o.<a class="code" href="structOSMessage.html#a61a7899985dd6f06be9b060b306eabc7">m_x</a> = 0;
<a name="l00582"></a>00582     }
<a name="l00583"></a>00583     
<a name="l00584"></a>00584         <a class="code" href="BaseApp_8h.html#a72086b48d24daf0a65dd20189a16bd16">GetBaseApp</a>()-&gt;<a class="code" href="classBaseApp.html#a8c4775724ea459bdf155a6920a44d6db">AddOSMessage</a>(o);
<a name="l00585"></a>00585 }
<a name="l00586"></a><a class="code" href="classBaseApp.html#a8b8f8ad385c4650034394fd9cdadf4e7">00586</a> <span class="keywordtype">void</span> <a class="code" href="classBaseApp.html#a8b8f8ad385c4650034394fd9cdadf4e7" title="Limits the running rate of the main loop.">BaseApp::SetFPSLimit</a>(<span class="keywordtype">float</span> fps) 
<a name="l00587"></a>00587 {
<a name="l00588"></a>00588         <span class="keywordflow">if</span> (fps &gt;= 0.0<a class="code" href="Renderer_2GL_2glext_8h.html#aba8ad56949f59242bc167b073dae3715">f</a>)
<a name="l00589"></a>00589         {
<a name="l00590"></a>00590                 <a class="code" href="structOSMessage.html">OSMessage</a> o;
<a name="l00591"></a>00591                 o.<a class="code" href="structOSMessage.html#a15a064581798f6bc8724440f285eacd7">m_type</a> = <a class="code" href="structOSMessage.html#a9fc98c3cc1a5a51feb7a977b01defadcaa9f622d279d24651285aede324d1eaa6">OSMessage::MESSAGE_SET_FPS_LIMIT</a>;
<a name="l00592"></a>00592                 o.<a class="code" href="structOSMessage.html#a61a7899985dd6f06be9b060b306eabc7">m_x</a> = fps;
<a name="l00593"></a>00593                 <a class="code" href="BaseApp_8h.html#a72086b48d24daf0a65dd20189a16bd16">GetBaseApp</a>()-&gt;<a class="code" href="classBaseApp.html#a8c4775724ea459bdf155a6920a44d6db">AddOSMessage</a>(o);
<a name="l00594"></a>00594         }
<a name="l00595"></a>00595 }
<a name="l00596"></a>00596 
<a name="l00597"></a><a class="code" href="classBaseApp.html#a24100b38bd752cbe945f697415e4d7e6">00597</a> <span class="keywordtype">void</span> <a class="code" href="classBaseApp.html#a24100b38bd752cbe945f697415e4d7e6">BaseApp::SetVideoMode</a>(<span class="keywordtype">int</span> <a class="code" href="flash_2GLES_2glext_8h.html#a3ce386e55bbeb900c1b23e064b89bd04">width</a>, <span class="keywordtype">int</span> <a class="code" href="flash_2GLES_2glext_8h.html#aedd0ea77029b98ce91e47c19addcb68f">height</a>, <span class="keywordtype">bool</span> bFullScreen, <span class="keywordtype">float</span> aspectRatio) <span class="comment">//aspectRatio should be 0 to ignore</span>
<a name="l00598"></a>00598 {
<a name="l00599"></a>00599         <span class="comment">//this message is only going to be processed by platforms that can change size during runtime and have such a thing as fullscreen</span>
<a name="l00600"></a>00600         
<a name="l00601"></a>00601         <a class="code" href="structOSMessage.html">OSMessage</a> o;
<a name="l00602"></a>00602         o.<a class="code" href="structOSMessage.html#a15a064581798f6bc8724440f285eacd7">m_type</a> = <a class="code" href="structOSMessage.html#a9fc98c3cc1a5a51feb7a977b01defadca99603a4fa64484a1ed69fa6739541070">OSMessage::MESSAGE_SET_VIDEO_MODE</a>;
<a name="l00603"></a>00603         o.<a class="code" href="structOSMessage.html#a61a7899985dd6f06be9b060b306eabc7">m_x</a> =(float) width;
<a name="l00604"></a>00604         o.<a class="code" href="structOSMessage.html#a6971e2199218ece8f10478d1fb76317c">m_y</a> = (float) height;
<a name="l00605"></a>00605         o.<a class="code" href="structOSMessage.html#ad5ca1ee0fbef5962213b612d11cfdc0a">m_fullscreen</a> = bFullScreen;   
<a name="l00606"></a>00606         o.<a class="code" href="structOSMessage.html#a53bd273e32e1afad848e51331a079d0b">m_fontSize</a> = aspectRatio;
<a name="l00607"></a>00607         <a class="code" href="BaseApp_8h.html#a72086b48d24daf0a65dd20189a16bd16">GetBaseApp</a>()-&gt;<a class="code" href="classBaseApp.html#a8c4775724ea459bdf155a6920a44d6db">AddOSMessage</a>(o);
<a name="l00608"></a>00608 }
<a name="l00609"></a>00609 
<a name="l00610"></a>00610 
<a name="l00611"></a>00611 
<a name="l00612"></a>00612 <span class="preprocessor">#ifdef _WINDOWS_</span>
<a name="l00613"></a>00613 <span class="preprocessor"></span>
<a name="l00614"></a>00614 <span class="comment">//yes, hacky.  Will cleanup when I add the OSX support for this</span>
<a name="l00615"></a>00615 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="BaseApp_8cpp.html#a4ca1103598c64732fa1acac32c958576">g_bIsFullScreen</a>;
<a name="l00616"></a>00616 <span class="preprocessor">#endif</span>
<a name="l00617"></a>00617 <span class="preprocessor"></span>
<a name="l00618"></a><a class="code" href="classBaseApp.html#a2caacffce1b3a412f7b57100e812c9ca">00618</a> <span class="keywordtype">bool</span> <a class="code" href="classBaseApp.html#a2caacffce1b3a412f7b57100e812c9ca">BaseApp::OnPreInitVideo</a>()
<a name="l00619"></a>00619 {
<a name="l00620"></a>00620         <span class="comment">//only called for desktop systems</span>
<a name="l00621"></a>00621         <span class="comment">//override in App.* if you want to do something here.  You&#39;d have to</span>
<a name="l00622"></a>00622         <span class="comment">//extern these vars from main.cpp to change them...</span>
<a name="l00623"></a>00623         
<a name="l00624"></a>00624         <span class="comment">//SetEmulatedPlatformID(PLATFORM_ID_WINDOWS);</span>
<a name="l00625"></a>00625         <span class="comment">//g_winVideoScreenX = 768;</span>
<a name="l00626"></a>00626         <span class="comment">//g_winVideoScreenY = 1024;</span>
<a name="l00627"></a>00627 
<a name="l00628"></a>00628         
<a name="l00629"></a>00629         <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">//no error</span>
<a name="l00630"></a>00630 }
<a name="l00631"></a>00631 
<a name="l00632"></a>00632 
<a name="l00633"></a><a class="code" href="classBaseApp.html#a4985ee16359a8a3e0c150944cd70ff35">00633</a> <span class="keywordtype">void</span> <a class="code" href="classBaseApp.html#a4985ee16359a8a3e0c150944cd70ff35">BaseApp::OnFullscreenToggleRequest</a>()
<a name="l00634"></a>00634 {
<a name="l00635"></a>00635 <span class="preprocessor">#ifdef _WINDOWS_</span>
<a name="l00636"></a>00636 <span class="preprocessor"></span>        
<a name="l00637"></a>00637         <span class="keyword">static</span> <span class="keywordtype">int</span> savex =0;
<a name="l00638"></a>00638         <span class="keyword">static</span> <span class="keywordtype">int</span> savey =0;
<a name="l00639"></a>00639 
<a name="l00640"></a>00640         <span class="keywordflow">if</span> (<a class="code" href="BaseApp_8cpp.html#a4ca1103598c64732fa1acac32c958576">g_bIsFullScreen</a>)
<a name="l00641"></a>00641         {
<a name="l00642"></a>00642                 <a class="code" href="BaseApp_8h.html#a72086b48d24daf0a65dd20189a16bd16">GetBaseApp</a>()-&gt;<a class="code" href="classBaseApp.html#a24100b38bd752cbe945f697415e4d7e6">SetVideoMode</a>(savex, savey, <span class="keyword">false</span>);
<a name="l00643"></a>00643 
<a name="l00644"></a>00644         } <span class="keywordflow">else</span>
<a name="l00645"></a>00645         {
<a name="l00646"></a>00646                 savex = <a class="code" href="AndroidUtils_8cpp.html#a2f0e58aac06a13b950cef03dcc3e7267">GetPrimaryGLX</a>();
<a name="l00647"></a>00647                 savey = <a class="code" href="AndroidUtils_8cpp.html#ac274a49195455502331eb617bce938e3">GetPrimaryGLY</a>();
<a name="l00648"></a>00648 
<a name="l00649"></a>00649                 <a class="code" href="BaseApp_8h.html#a72086b48d24daf0a65dd20189a16bd16">GetBaseApp</a>()-&gt;<a class="code" href="classBaseApp.html#a24100b38bd752cbe945f697415e4d7e6">SetVideoMode</a>(GetSystemMetrics(SM_CXSCREEN), GetSystemMetrics(SM_CYSCREEN), <span class="keyword">true</span>);
<a name="l00650"></a>00650 
<a name="l00651"></a>00651         }
<a name="l00652"></a>00652 <span class="preprocessor">#endif</span>
<a name="l00653"></a>00653 <span class="preprocessor"></span>}
<a name="l00654"></a>00654 
<a name="l00655"></a>00655 
<a name="l00656"></a><a class="code" href="classBaseApp.html#ad4f6cd05f7936aa7a0cd86e212fccbcf">00656</a> <span class="keywordtype">void</span> <a class="code" href="classBaseApp.html#ad4f6cd05f7936aa7a0cd86e212fccbcf">BaseApp::ResetTouches</a>()
<a name="l00657"></a>00657 {
<a name="l00658"></a>00658         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; C_MAX_TOUCHES_AT_ONCE; i++)
<a name="l00659"></a>00659         {
<a name="l00660"></a>00660                 <span class="keywordflow">if</span> (<a class="code" href="classBaseApp.html#aa7398481bc9b0bdf9e54f246f502c773">m_touchTracker</a>[i].IsDown())
<a name="l00661"></a>00661                 {
<a name="l00662"></a>00662                         <a class="code" href="AndroidUtils_8cpp.html#aaa5c9bf2289dec09f59ef2b7ba6c66ae">LogMsg</a>(<span class="stringliteral">&quot;Finger %d is down, sending fake release&quot;</span>, i);
<a name="l00663"></a>00663                         <span class="comment">//release it with a fake message</span>
<a name="l00664"></a>00664                         <a class="code" href="BaseApp_8h.html#a11454091168162d8f3991461725aa24f">GetMessageManager</a>()-&gt;<a class="code" href="classMessageManager.html#a8a5224558c0c4718b1c5e8d197f179cb">SendGUIEx</a>(<a class="code" href="MessageManager_8h.html#a700ed30d49bfe436323e17539d3a0010a7f2d808ba01bebb86035466a59744aee">MESSAGE_TYPE_GUI_CLICK_END</a>, <a class="code" href="classBaseApp.html#aa7398481bc9b0bdf9e54f246f502c773">m_touchTracker</a>[i].GetPos().<a class="code" href="flash_2GLES_2glext_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>, <a class="code" href="classBaseApp.html#aa7398481bc9b0bdf9e54f246f502c773">m_touchTracker</a>[i].GetPos().<a class="code" href="flash_2GLES_2glext_8h.html#a2532a9f8ed3a10a63f5e3c484fbfdb9b">y</a>, i);
<a name="l00665"></a>00665                 }
<a name="l00666"></a>00666         }
<a name="l00667"></a>00667 
<a name="l00668"></a>00668 }
<a name="l00669"></a>00669 
<a name="l00670"></a><a class="code" href="classBaseApp.html#afa088b1de3a17d9d06533cc27a1fe9e0">00670</a> <a class="code" href="classTouchTrackInfo.html">TouchTrackInfo</a> * <a class="code" href="classBaseApp.html#afa088b1de3a17d9d06533cc27a1fe9e0">BaseApp::GetTouch</a>( <span class="keywordtype">int</span> <a class="code" href="Renderer_2GL_2glext_8h.html#a57f14e05b1900f16a2da82ade47d0c6d">index</a> )
<a name="l00671"></a>00671 {
<a name="l00672"></a>00672         <span class="keywordflow">if</span> (<span class="keyword">this</span> == 0) <span class="keywordflow">return</span> NULL;
<a name="l00673"></a>00673         <span class="keywordflow">if</span> (index &gt;= C_MAX_TOUCHES_AT_ONCE)
<a name="l00674"></a>00674         {
<a name="l00675"></a>00675                 assert(!<span class="stringliteral">&quot;Uh no&quot;</span>);
<a name="l00676"></a>00676                 <span class="keywordflow">return</span> &amp;<a class="code" href="classBaseApp.html#aa7398481bc9b0bdf9e54f246f502c773">m_touchTracker</a>[C_MAX_TOUCHES_AT_ONCE-1];
<a name="l00677"></a>00677         }
<a name="l00678"></a>00678 
<a name="l00679"></a>00679         <span class="keywordflow">return</span> &amp;<a class="code" href="classBaseApp.html#aa7398481bc9b0bdf9e54f246f502c773">m_touchTracker</a>[<a class="code" href="Renderer_2GL_2glext_8h.html#a57f14e05b1900f16a2da82ade47d0c6d">index</a>];
<a name="l00680"></a>00680 }
<a name="l00681"></a>00681 
<a name="l00682"></a><a class="code" href="classBaseApp.html#a2144241b29a1913f09ce25c219dfed7b">00682</a> <span class="keywordtype">int</span> <a class="code" href="classBaseApp.html#a2144241b29a1913f09ce25c219dfed7b">BaseApp::GetTotalActiveTouches</a>()
<a name="l00683"></a>00683 {
<a name="l00684"></a>00684         <span class="keywordtype">int</span> <a class="code" href="flash_2GLES_2glext_8h.html#a4e867eee5910f6b2df6123b47ab70dae">count</a> = 0;
<a name="l00685"></a>00685         
<a name="l00686"></a>00686         <span class="comment">//why am I doing C_MAX_TOUCHES_AT_ONCE-1 instead of C_MAX_TOUCHES_AT_ONCE? Well, it&#39;s because SendFakeInputMessageToEntity()</span>
<a name="l00687"></a>00687         <span class="comment">//uses the last touch to send fake mouse presses and should always be ignored. - Seth</span>
<a name="l00688"></a>00688 
<a name="l00689"></a>00689         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; C_MAX_TOUCHES_AT_ONCE-1; i++)
<a name="l00690"></a>00690         {
<a name="l00691"></a>00691                 <span class="keywordflow">if</span> (<a class="code" href="classBaseApp.html#aa7398481bc9b0bdf9e54f246f502c773">m_touchTracker</a>[i].IsDown()) 
<a name="l00692"></a>00692                 {
<a name="l00693"></a>00693                         count++;
<a name="l00694"></a>00694                 }
<a name="l00695"></a>00695         }
<a name="l00696"></a>00696 
<a name="l00697"></a>00697         <span class="keywordflow">return</span> <a class="code" href="flash_2GLES_2glext_8h.html#a4e867eee5910f6b2df6123b47ab70dae">count</a>;
<a name="l00698"></a>00698 }
<a name="l00699"></a>00699 
<a name="l00700"></a><a class="code" href="classBaseApp.html#abb634c4ba66a83c2ff69968f3ce6dc59">00700</a> <span class="keywordtype">string</span> <a class="code" href="classBaseApp.html#abb634c4ba66a83c2ff69968f3ce6dc59">BaseApp::GetAppVersion</a>()
<a name="l00701"></a>00701 {
<a name="l00702"></a>00702         <span class="keywordflow">return</span> <a class="code" href="classBaseApp.html#a74ce175e82e8ddf0e7e3e5c95e046ae7">m_version</a>;
<a name="l00703"></a>00703 }
<a name="l00704"></a>00704 
<a name="l00705"></a><a class="code" href="classTouchTrackInfo.html#a13c8cada4a6a9861337f68b6df14a7a5">00705</a> <span class="keywordtype">void</span> <a class="code" href="classTouchTrackInfo.html#a13c8cada4a6a9861337f68b6df14a7a5">TouchTrackInfo::SetWasHandled</a>( <span class="keywordtype">bool</span> bNew, <a class="code" href="classEntity.html">Entity</a> *pEntity )
<a name="l00706"></a>00706 {
<a name="l00707"></a>00707         m_pEntityThatHandledIt = pEntity;
<a name="l00708"></a>00708         m_bHandled = bNew;
<a name="l00709"></a>00709 }
<a name="l00710"></a>00710 
<a name="l00711"></a><a class="code" href="classTouchTrackInfo.html#a5199770cfef71a71cdd0ad9a9add7434">00711</a> <span class="keywordtype">void</span> <a class="code" href="classTouchTrackInfo.html#a5199770cfef71a71cdd0ad9a9add7434">TouchTrackInfo::SetWasPreHandled</a>( <span class="keywordtype">bool</span> bNew, <a class="code" href="classEntity.html">Entity</a> *pEntity <span class="comment">/*= NULL*/</span> )
<a name="l00712"></a>00712 {
<a name="l00713"></a>00713         m_bPreHandled = bNew;
<a name="l00714"></a>00714         m_pEntityThatPreHandledIt = pEntity;
<a name="l00715"></a>00715 }
<a name="l00716"></a>00716 
</pre></div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Thu May 2 2013 17:17:04 for Proton by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
