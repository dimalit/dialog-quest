<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Proton: NetAdapter.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Proton
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_b4959094aa2649f063000bebf8111065.html">shared</a>      </li>
      <li class="navelem"><a class="el" href="dir_b8482b31652a736e8aff4a5756693710.html">Network</a>      </li>
      <li class="navelem"><a class="el" href="dir_3a646d04f2bc014be46b3dfe896275b2.html">NetAdapter</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">NetAdapter.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="NetAdapter_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// - ------------------------------------------------------------------------------------------ - //</span>
<a name="l00002"></a>00002 <span class="comment">// NET ADAPTER -- A cross platform library for getting presentable Network Adapter information.</span>
<a name="l00003"></a>00003 <span class="comment">// By Mike Kasprzak -- http://www.toonormal.com http://www.sykhronics.com -- twitter @mikekasprzak</span>
<a name="l00004"></a>00004 <span class="comment">// http://code.google.com/p/net-adapter/</span>
<a name="l00005"></a>00005 <span class="comment">//</span>
<a name="l00006"></a>00006 <span class="comment">// This is free and unencumbered software released into the public domain.</span>
<a name="l00007"></a>00007 <span class="comment">// </span>
<a name="l00008"></a>00008 <span class="comment">// Anyone is free to copy, modify, publish, use, compile, sell, or distribute this software, either</span>
<a name="l00009"></a>00009 <span class="comment">// in source code form or as a compiled binary, for any purpose, commercial or non-commercial, and</span>
<a name="l00010"></a>00010 <span class="comment">// by any means.</span>
<a name="l00011"></a>00011 <span class="comment">// </span>
<a name="l00012"></a>00012 <span class="comment">// In jurisdictions that recognize copyright laws, the author or authors of this software dedicate</span>
<a name="l00013"></a>00013 <span class="comment">// any and all copyright interest in the software to the public domain. We make this dedication for</span>
<a name="l00014"></a>00014 <span class="comment">// the benefit of the public at large and to the detriment of our heirs and successors. We intend </span>
<a name="l00015"></a>00015 <span class="comment">// this dedication to be an overt act of relinquishment in perpetuity of all present and future </span>
<a name="l00016"></a>00016 <span class="comment">// rights to this software under copyright law.</span>
<a name="l00017"></a>00017 <span class="comment">// </span>
<a name="l00018"></a>00018 <span class="comment">// THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING </span>
<a name="l00019"></a>00019 <span class="comment">// BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND </span>
<a name="l00020"></a>00020 <span class="comment">// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER </span>
<a name="l00021"></a>00021 <span class="comment">// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN</span>
<a name="l00022"></a>00022 <span class="comment">// CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</span>
<a name="l00023"></a>00023 <span class="comment">// </span>
<a name="l00024"></a>00024 <span class="comment">// For more information, please refer to &lt;http://unlicense.org/&gt;</span>
<a name="l00025"></a>00025 <span class="comment">// - ------------------------------------------------------------------------------------------ - //</span>
<a name="l00026"></a>00026 <span class="preprocessor">#ifndef __NET_ADAPTER_H__</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span><span class="preprocessor">#define __NET_ADAPTER_H__</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span><span class="comment">// - ------------------------------------------------------------------------------------------ - //</span>
<a name="l00029"></a>00029 <span class="comment">// Important Notes: </span>
<a name="l00030"></a>00030 <span class="comment">// 1. On Windows, this (and all network calls) must be made AFTER Winsock2 is initialized. If</span>
<a name="l00031"></a>00031 <span class="comment">//    you are &quot;playing nice&quot; with other networking libraries, you can let them init for you.</span>
<a name="l00032"></a>00032 <span class="comment">//    Otherwise, do something like this in your _WIN32 build:</span>
<a name="l00033"></a>00033 <span class="comment">//              #include &lt;Winsock2.h&gt;</span>
<a name="l00034"></a>00034 <span class="comment">//</span>
<a name="l00035"></a>00035 <span class="comment">//              void EnableNetworking() {</span>
<a name="l00036"></a>00036 <span class="comment">//                      WSADATA wsaData;</span>
<a name="l00037"></a>00037 <span class="comment">//                      WSAStartup( MAKEWORD(2,2), &amp;wsaData );          // 2.2 is XP+, and Win95 with an update //</span>
<a name="l00038"></a>00038 <span class="comment">//      }</span>
<a name="l00039"></a>00039 <span class="comment">//              void DisableNetworking() {</span>
<a name="l00040"></a>00040 <span class="comment">//                      WSACleanup();</span>
<a name="l00041"></a>00041 <span class="comment">//              }</span>
<a name="l00042"></a>00042 <span class="comment">// 2. The concept of the &quot;primary&quot; net adapter is actually a guess.</span>
<a name="l00043"></a>00043 <span class="comment">//    On Windows it&#39;s the first adapter with a DNS Server set.</span>
<a name="l00044"></a>00044 <span class="comment">//    On Linux it&#39;s either &quot;eth0&quot;, or the first adapter without a localhost IP (127.0.0.1).</span>
<a name="l00045"></a>00045 <span class="comment">// 3. Net Adapter can be built with -DNET_ADAPTER_STUB to force usage of the stub (i.e. dummy code).</span>
<a name="l00046"></a>00046 <span class="comment">// - ------------------------------------------------------------------------------------------ - //</span>
<a name="l00047"></a>00047 <span class="comment">// // Usage 1: Get the Current only //</span>
<a name="l00048"></a>00048 <span class="comment">// pNetAdapterInfo* Adapters = new_pNetAdapterInfo();                                                   // Get adapters //</span>
<a name="l00049"></a>00049 <span class="comment">// const NetAdapterInfo* Current = get_primary_pNetAdapterInfo( Adapters );             // Get primary adapter //</span>
<a name="l00050"></a>00050 <span class="comment">// printf( &quot;%s: %s (%s)\n&quot;, Current-&gt;Name, Current-&gt;IP, Current-&gt;MAC );</span>
<a name="l00051"></a>00051 <span class="comment">// delete_pNetAdapterInfo( Adapters );                                                                                  // Clean up //</span>
<a name="l00052"></a>00052 <span class="comment">//</span>
<a name="l00053"></a>00053 <span class="comment">// // Usage 2: Get all adapters //</span>
<a name="l00054"></a>00054 <span class="comment">// pNetAdapterInfo* Adapters = new_pNetAdapterInfo();</span>
<a name="l00055"></a>00055 <span class="comment">// size_t AdapterCount = count_pNetAdapterInfo(Adapters);</span>
<a name="l00056"></a>00056 <span class="comment">// for ( size_t Index = 0; Index &lt; AdapterCount; Index++ ) {</span>
<a name="l00057"></a>00057 <span class="comment">//     const NetAdapterInfo* Current = get_pNetAdapterInfo( Adapters, Index );  // get_, not get_primary_ //</span>
<a name="l00058"></a>00058 <span class="comment">//     printf( &quot;%i - %s: %s (%s)\n&quot;, Index, Current-&gt;Name, Current-&gt;IP, Current-&gt;MAC );</span>
<a name="l00059"></a>00059 <span class="comment">// }</span>
<a name="l00060"></a>00060 <span class="comment">// delete_pNetAdapterInfo( Adapters );</span>
<a name="l00061"></a>00061 <span class="comment">// - ------------------------------------------------------------------------------------------ - //</span>
<a name="l00062"></a>00062 <span class="comment">// Libraries Used:</span>
<a name="l00063"></a>00063 <span class="comment">//   Visual Studio (automatic): ws2_32.lib Iphlpapi.lib</span>
<a name="l00064"></a>00064 <span class="comment">//   MinGW: -lws2_32 -lIphlpapi (i.e. libws2_32.a libIphlpapi.a) </span>
<a name="l00065"></a>00065 <span class="comment">//   Linux: ?</span>
<a name="l00066"></a>00066 <span class="comment">// - ------------------------------------------------------------------------------------------ - //</span>
<a name="l00067"></a>00067 <span class="comment">// Changelog:</span>
<a name="l00068"></a>00068 <span class="comment">// 0.01 -- Initial Release. </span>
<a name="l00069"></a>00069 <span class="comment">//         Windows XP to Windows 8 (non Metro) support.</span>
<a name="l00070"></a>00070 <span class="comment">//         Linux support.</span>
<a name="l00071"></a>00071 <span class="comment">//         Thanks to Seth Robinson for his VC2005 fixes.</span>
<a name="l00072"></a>00072 <span class="comment">// - ------------------------------------------------------------------------------------------ - //</span>
<a name="l00073"></a>00073 <span class="preprocessor">#include &lt;string.h&gt;</span>                                                     <span class="comment">// size_t //</span>
<a name="l00074"></a>00074 <span class="comment">// - ------------------------------------------------------------------------------------------ - //</span>
<a name="l00075"></a>00075 <span class="preprocessor">#define NET_ADAPTER_IP_LENGTH   (8*4)+7+1       // 8 hex 16bit numbers, 7 colons, null terminator //</span>
<a name="l00076"></a>00076 <span class="preprocessor"></span><span class="preprocessor">#define NET_ADAPTER_MAC_LENGTH  (8*2)+7+1       // 8 hex 8bit numbers, 7 colons, null terminator //</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span><span class="comment">// - ------------------------------------------------------------------------------------------ - //</span>
<a name="l00078"></a><a class="code" href="structNetAdapterInfo.html">00078</a> <span class="keyword">struct </span><a class="code" href="structNetAdapterInfo.html">NetAdapterInfo</a> {
<a name="l00079"></a><a class="code" href="structNetAdapterInfo.html#a2bff993776db5a2a6841130dd49d0042">00079</a>         <span class="keywordtype">char</span> <a class="code" href="structNetAdapterInfo.html#a2bff993776db5a2a6841130dd49d0042">Name</a>[128+1];                                               <span class="comment">// A copy of its &quot;nice&quot; name. //</span>
<a name="l00080"></a>00080         
<a name="l00081"></a><a class="code" href="structNetAdapterInfo.html#ab49e8fd085171fcdf5e58e0a082e9be1">00081</a>         <span class="keywordtype">char</span> <a class="code" href="structNetAdapterInfo.html#ab49e8fd085171fcdf5e58e0a082e9be1">IP</a>[NET_ADAPTER_IP_LENGTH];                 <span class="comment">// Enough for an IPv6 (though only v4 supported) //</span>
<a name="l00082"></a><a class="code" href="structNetAdapterInfo.html#aca9efb7e8adf1fc7d1b6b12172a9b833">00082</a>         <span class="keywordtype">char</span> <a class="code" href="structNetAdapterInfo.html#aca9efb7e8adf1fc7d1b6b12172a9b833">MAC</a>[NET_ADAPTER_MAC_LENGTH];               <span class="comment">// Enough for an 8-part MAC. Usually 6 parts. //</span>
<a name="l00083"></a>00083         
<a name="l00084"></a>00084         <span class="keyword">struct </span>{
<a name="l00085"></a>00085                 <span class="comment">// Data is in LSB first format. This is suitable for display, but may not match the data //</span>
<a name="l00086"></a>00086                 <span class="comment">//   formatting of your platforms socket library. //</span>
<a name="l00087"></a><a class="code" href="structNetAdapterInfo.html#a81b7f3260cd63ad2f8a4598d0df9d6f5">00087</a>                 <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structNetAdapterInfo.html#a81b7f3260cd63ad2f8a4598d0df9d6f5">IPv4</a>[4];                          <span class="comment">// Typical IPv4 address as an array of bytes //</span>
<a name="l00088"></a>00088 <span class="comment">//              unsigned short IPv6[8];                         // Typical IPv6 address as an array of shorts //</span>
<a name="l00089"></a><a class="code" href="structNetAdapterInfo.html#a39254837769dea34893a67725d81ca13">00089</a>                 <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structNetAdapterInfo.html#aca9efb7e8adf1fc7d1b6b12172a9b833">MAC</a>[6];                           <span class="comment">// typical MAC address as an array of bytes //</span>
<a name="l00090"></a>00090         } <a class="code" href="structNetAdapterInfo.html#a5bd7a5796f8c01dba9bfe35a26f2d7cc">Data</a>;
<a name="l00091"></a>00091         
<a name="l00092"></a>00092         <span class="comment">// Data that isn&#39;t available everywhere (or I haven&#39;t figured out yet) //</span>
<a name="l00093"></a>00093         <span class="comment">// subnet mask -- Linux             -- i.e. 255.255.255.0 on a typical LAN</span>
<a name="l00094"></a>00094         <span class="comment">// UDP broadcast address -- Linux   -- i.e. 192.168.0.255 on a typical LAN</span>
<a name="l00095"></a>00095         <span class="comment">// UDP multicast address -- Windows -- i.e. 224.0.0.1, but there are often many</span>
<a name="l00096"></a>00096         <span class="comment">// DNS Server -- Windows            -- i.e. 192.168.0.1 on a typical LAN</span>
<a name="l00097"></a>00097         
<a name="l00098"></a><a class="code" href="structNetAdapterInfo.html#af3021afbddb9055128a1e81d2191fe58">00098</a>         <span class="keywordtype">char</span> <a class="code" href="structNetAdapterInfo.html#af3021afbddb9055128a1e81d2191fe58">NetMask</a>[NET_ADAPTER_IP_LENGTH];    <span class="comment">// Linux/Unix Only //</span>
<a name="l00099"></a><a class="code" href="structNetAdapterInfo.html#a9533d7eaf0a416a5f2e9e627afc5c08f">00099</a>         <span class="keywordtype">char</span> <a class="code" href="structNetAdapterInfo.html#a9533d7eaf0a416a5f2e9e627afc5c08f">Broadcast</a>[NET_ADAPTER_IP_LENGTH];  <span class="comment">// Linux/Unix Only (could be derived from NetMask) //</span>
<a name="l00100"></a>00100         
<a name="l00101"></a><a class="code" href="structNetAdapterInfo.html#ae520053a590b0c04732ede53ffb0347e">00101</a>         <span class="keywordtype">char</span> <a class="code" href="structNetAdapterInfo.html#ae520053a590b0c04732ede53ffb0347e">Description</a>[256+1];                                <span class="comment">// Windows Only //</span>
<a name="l00102"></a><a class="code" href="structNetAdapterInfo.html#a368e551e073404a867266c2e25816295">00102</a>         <span class="keywordtype">char</span> <a class="code" href="structNetAdapterInfo.html#a368e551e073404a867266c2e25816295">DNS</a>[NET_ADAPTER_IP_LENGTH];                <span class="comment">// Windows Only //</span>
<a name="l00103"></a>00103 };
<a name="l00104"></a>00104 <span class="comment">// - ------------------------------------------------------------------------------------------ - //</span>
<a name="l00105"></a><a class="code" href="NetAdapter_8h.html#abe29dc1700e64955cf59c7200ed97b01">00105</a> <span class="keyword">typedef</span> <a class="code" href="structNetAdapterInfo.html">NetAdapterInfo</a>* <a class="code" href="NetAdapter_8h.html#abe29dc1700e64955cf59c7200ed97b01">pNetAdapterInfo</a>;
<a name="l00106"></a>00106 <span class="comment">// - ------------------------------------------------------------------------------------------ - //</span>
<a name="l00107"></a>00107 <a class="code" href="structNetAdapterInfo.html">pNetAdapterInfo</a>* <a class="code" href="NetAdapter_8h.html#a96a37da8377975a2fb2d8de48ba912ec">new_pNetAdapterInfo</a>();                                                                 <span class="comment">// Returns Multiple Adapters //</span>
<a name="l00108"></a>00108 <span class="keywordtype">int</span> <a class="code" href="NetAdapter_8h.html#a7f5d1ad902454eb663e8ca763d1c323f">delete_pNetAdapterInfo</a>( <a class="code" href="structNetAdapterInfo.html">pNetAdapterInfo</a>* Adapters );                                <span class="comment">// Deletes those Adapters //</span>
<a name="l00109"></a>00109 
<a name="l00110"></a>00110 <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="NetAdapter_8h.html#a03fe8c4b7b47d34a57d0c27b0f4ca636">count_pNetAdapterInfo</a>( <span class="keyword">const</span> <a class="code" href="structNetAdapterInfo.html">pNetAdapterInfo</a>* Adapters );  <span class="comment">// How Many Adapters //</span>
<a name="l00111"></a>00111 
<a name="l00112"></a>00112 <span class="comment">// Both return a single Adapter (notice the missing &quot;p&quot; prefix) //</span>
<a name="l00113"></a>00113 <span class="keyword">const</span> <a class="code" href="structNetAdapterInfo.html">NetAdapterInfo</a>* <a class="code" href="NetAdapter_8h.html#adcb353255b2f46a3666d9112d1282b8f">get_pNetAdapterInfo</a>( <span class="keyword">const</span> <a class="code" href="structNetAdapterInfo.html">pNetAdapterInfo</a>* Adapters, <span class="keyword">const</span> <span class="keywordtype">size_t</span> Index );
<a name="l00114"></a>00114 <span class="keyword">const</span> <a class="code" href="structNetAdapterInfo.html">NetAdapterInfo</a>* <a class="code" href="NetAdapter_8h.html#ac9fa584d32f1d2e82ed0d34244077604">get_primary_pNetAdapterInfo</a>( <span class="keyword">const</span> <a class="code" href="structNetAdapterInfo.html">pNetAdapterInfo</a>* Adapters );
<a name="l00115"></a>00115 <span class="comment">// - ------------------------------------------------------------------------------------------ - //</span>
<a name="l00116"></a>00116 <span class="preprocessor">#endif // __NET_ADAPTER_H__</span>
<a name="l00117"></a>00117 <span class="preprocessor"></span><span class="comment">// - ------------------------------------------------------------------------------------------ - //</span>
</pre></div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Thu May 2 2013 17:17:10 for Proton by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
